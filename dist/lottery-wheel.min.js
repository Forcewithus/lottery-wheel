!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).Wheel=n()}(this,(function(){"use strict";var t={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},n={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},e=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],r={CSS:{},springs:{}};function i(t,n,e){return Math.min(Math.max(t,n),e)}function o(t,n){return t.indexOf(n)>-1}function a(t,n){return t.apply(null,n)}var u={arr:function(t){return Array.isArray(t)},obj:function(t){return o(Object.prototype.toString.call(t),"Object")},pth:function(t){return u.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return t.nodeType||u.svg(t)},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return u.hex(t)||u.rgb(t)||u.hsl(t)},key:function(e){return!t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function s(t){var n=/\(([^)]+)\)/.exec(t);return n?n[1].split(",").map((function(t){return parseFloat(t)})):[]}function c(t,n){var e=s(t),o=i(u.und(e[0])?1:e[0],.1,100),a=i(u.und(e[1])?100:e[1],.1,100),c=i(u.und(e[2])?10:e[2],.1,100),f=i(u.und(e[3])?0:e[3],.1,100),l=Math.sqrt(a/o),d=c/(2*Math.sqrt(a*o)),h=d<1?l*Math.sqrt(1-d*d):0,p=d<1?(d*l-f)/h:-f+l;function g(t){var e=n?n*t/1e3:t;return e=d<1?Math.exp(-e*d*l)*(1*Math.cos(h*e)+p*Math.sin(h*e)):(1+p*e)*Math.exp(-e*l),0===t||1===t?t:1-e}return n?g:function(){var n=r.springs[t];if(n)return n;for(var e=0,i=0;;)if(1===g(e+=1/6)){if(++i>=16)break}else i=0;var o=e*(1/6)*1e3;return r.springs[t]=o,o}}function f(t){return void 0===t&&(t=10),function(n){return Math.ceil(i(n,1e-6,1)*t)*(1/t)}}var l,d,h=function(){function t(t,n){return 1-3*n+3*t}function n(t,n){return 3*n-6*t}function e(t){return 3*t}function r(r,i,o){return((t(i,o)*r+n(i,o))*r+e(i))*r}function i(r,i,o){return 3*t(i,o)*r*r+2*n(i,o)*r+e(i)}return function(t,n,e,o){if(0<=t&&t<=1&&0<=e&&e<=1){var a=new Float32Array(11);if(t!==n||e!==o)for(var u=0;u<11;++u)a[u]=r(.1*u,t,e);return function(i){return t===n&&e===o||0===i||1===i?i:r(s(i),n,o)}}function s(n){for(var o=0,u=1;10!==u&&a[u]<=n;++u)o+=.1;--u;var s=o+.1*((n-a[u])/(a[u+1]-a[u])),c=i(s,t,e);return c>=.001?function(t,n,e,o){for(var a=0;a<4;++a){var u=i(n,e,o);if(0===u)return n;n-=(r(n,e,o)-t)/u}return n}(n,s,t,e):0===c?s:function(t,n,e,i,o){var a,u,s=0;do{(a=r(u=n+(e-n)/2,i,o)-t)>0?e=u:n=u}while(Math.abs(a)>1e-7&&++s<10);return u}(n,o,o+.1,t,e)}}}(),p=(l={linear:function(){return function(t){return t}}},d={Sine:function(){return function(t){return 1-Math.cos(t*Math.PI/2)}},Circ:function(){return function(t){return 1-Math.sqrt(1-t*t)}},Back:function(){return function(t){return t*t*(3*t-2)}},Bounce:function(){return function(t){for(var n,e=4;t<((n=Math.pow(2,--e))-1)/11;);return 1/Math.pow(4,3-e)-7.5625*Math.pow((3*n-2)/22-t,2)}},Elastic:function(t,n){void 0===t&&(t=1),void 0===n&&(n=.5);var e=i(t,1,10),r=i(n,.1,2);return function(t){return 0===t||1===t?t:-e*Math.pow(2,10*(t-1))*Math.sin((t-1-r/(2*Math.PI)*Math.asin(1/e))*(2*Math.PI)/r)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(t,n){d[t]=function(){return function(t){return Math.pow(t,n+2)}}})),Object.keys(d).forEach((function(t){var n=d[t];l["easeIn"+t]=n,l["easeOut"+t]=function(t,e){return function(r){return 1-n(t,e)(1-r)}},l["easeInOut"+t]=function(t,e){return function(r){return r<.5?n(t,e)(2*r)/2:1-n(t,e)(-2*r+2)/2}}})),l);function g(t,n){if(u.fnc(t))return t;var e=t.split("(")[0],r=p[e],i=s(t);switch(e){case"spring":return c(t,n);case"cubicBezier":return a(h,i);case"steps":return a(f,i);default:return a(r,i)}}function v(t){try{return document.querySelectorAll(t)}catch(t){return}}function m(t,n){for(var e=t.length,r=arguments.length>=2?arguments[1]:void 0,i=[],o=0;o<e;o++)if(o in t){var a=t[o];n.call(r,a,o,t)&&i.push(a)}return i}function y(t){return t.reduce((function(t,n){return t.concat(u.arr(n)?y(n):n)}),[])}function b(t){return u.arr(t)?t:(u.str(t)&&(t=v(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function w(t,n){return t.some((function(t){return t===n}))}function x(t){var n={};for(var e in t)n[e]=t[e];return n}function _(t,n){var e=x(t);for(var r in t)e[r]=n.hasOwnProperty(r)?n[r]:t[r];return e}function M(t,n){var e=x(t);for(var r in n)e[r]=u.und(t[r])?n[r]:t[r];return e}function C(t){return u.rgb(t)?(e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n=t))?"rgba("+e[1]+",1)":n:u.hex(t)?function(t){var n=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,n,e,r){return n+n+e+e+r+r})),e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return"rgba("+parseInt(e[1],16)+","+parseInt(e[2],16)+","+parseInt(e[3],16)+",1)"}(t):u.hsl(t)?function(t){var n,e,r,i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),o=parseInt(i[1],10)/360,a=parseInt(i[2],10)/100,u=parseInt(i[3],10)/100,s=i[4]||1;function c(t,n,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(n-t)*e:e<.5?n:e<2/3?t+(n-t)*(2/3-e)*6:t}if(0==a)n=e=r=u;else{var f=u<.5?u*(1+a):u+a-u*a,l=2*u-f;n=c(l,f,o+1/3),e=c(l,f,o),r=c(l,f,o-1/3)}return"rgba("+255*n+","+255*e+","+255*r+","+s+")"}(t):void 0;var n,e}function k(t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(n)return n[1]}function $(t,n){return u.fnc(t)?t(n.target,n.id,n.total):t}function B(t,n){return t.getAttribute(n)}function F(t,n,e){if(w([e,"deg","rad","turn"],k(n)))return n;var i=r.CSS[n+e];if(!u.und(i))return i;var o=document.createElement(t.tagName),a=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=100+e;var s=100/o.offsetWidth;a.removeChild(o);var c=s*parseFloat(n);return r.CSS[n+e]=c,c}function O(t,n,e){if(n in t.style){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=t.style[n]||getComputedStyle(t).getPropertyValue(r)||"0";return e?F(t,i,e):i}}function P(t,n){return u.dom(t)&&!u.inp(t)&&(B(t,n)||u.svg(t)&&t[n])?"attribute":u.dom(t)&&w(e,n)?"transform":u.dom(t)&&"transform"!==n&&O(t,n)?"css":null!=t[n]?"object":void 0}function S(t){if(u.dom(t)){for(var n,e=t.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map;n=r.exec(e);)i.set(n[1],n[2]);return i}}function D(t,n,e,r){var i=o(n,"scale")?1:0+function(t){return o(t,"translate")||"perspective"===t?"px":o(t,"rotate")||o(t,"skew")?"deg":void 0}(n),a=S(t).get(n)||i;return e&&(e.transforms.list.set(n,a),e.transforms.last=n),r?F(t,a,r):a}function T(t,n,e,r){switch(P(t,n)){case"transform":return D(t,n,r,e);case"css":return O(t,n,e);case"attribute":return B(t,n);default:return t[n]||0}}function A(t,n){var e=/^(\*=|\+=|-=)/.exec(t);if(!e)return t;var r=k(t)||0,i=parseFloat(n),o=parseFloat(t.replace(e[0],""));switch(e[0][0]){case"+":return i+o+r;case"-":return i-o+r;case"*":return i*o+r}}function E(t,n){if(u.col(t))return C(t);if(/\s/g.test(t))return t;var e=k(t),r=e?t.substr(0,t.length-e.length):t;return n?r+n:r}function L(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))}function N(t){for(var n,e=t.points,r=0,i=0;i<e.numberOfItems;i++){var o=e.getItem(i);i>0&&(r+=L(n,o)),n=o}return r}function I(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return function(t){return 2*Math.PI*B(t,"r")}(t);case"rect":return function(t){return 2*B(t,"width")+2*B(t,"height")}(t);case"line":return function(t){return L({x:B(t,"x1"),y:B(t,"y1")},{x:B(t,"x2"),y:B(t,"y2")})}(t);case"polyline":return N(t);case"polygon":return function(t){var n=t.points;return N(t)+L(n.getItem(n.numberOfItems-1),n.getItem(0))}(t)}}function z(t,n){var e=n||{},r=e.el||function(t){for(var n=t.parentNode;u.svg(n)&&u.svg(n.parentNode);)n=n.parentNode;return n}(t),i=r.getBoundingClientRect(),o=B(r,"viewBox"),a=i.width,s=i.height,c=e.viewBox||(o?o.split(" "):[0,0,a,s]);return{el:r,viewBox:c,x:c[0]/1,y:c[1]/1,w:a/c[2],h:s/c[3]}}function j(t,n){function e(e){void 0===e&&(e=0);var r=n+e>=1?n+e:0;return t.el.getPointAtLength(r)}var r=z(t.el,t.svg),i=e(),o=e(-1),a=e(1);switch(t.property){case"x":return(i.x-r.x)*r.w;case"y":return(i.y-r.y)*r.h;case"angle":return 180*Math.atan2(a.y-o.y,a.x-o.x)/Math.PI}}function R(t,n){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=E(u.pth(t)?t.totalLength:t,n)+"";return{original:r,numbers:r.match(e)?r.match(e).map(Number):[0],strings:u.str(t)||n?r.split(e):[]}}function q(t){return m(t?y(u.arr(t)?t.map(b):b(t)):[],(function(t,n,e){return e.indexOf(t)===n}))}function W(t){var n=q(t);return n.map((function(t,e){return{target:t,id:e,total:n.length,transforms:{list:S(t)}}}))}function H(t,n){var e=x(n);if(/^spring/.test(e.easing)&&(e.duration=c(e.easing)),u.arr(t)){var r=t.length;2===r&&!u.obj(t[0])?t={value:t}:u.fnc(n.duration)||(e.duration=n.duration/r)}var i=u.arr(t)?t:[t];return i.map((function(t,e){var r=u.obj(t)&&!u.pth(t)?t:{value:t};return u.und(r.delay)&&(r.delay=e?0:n.delay),u.und(r.endDelay)&&(r.endDelay=e===i.length-1?n.endDelay:0),r})).map((function(t){return M(t,e)}))}function X(t,n){var e=[],r=n.keyframes;for(var i in r&&(n=M(function(t){for(var n=m(y(t.map((function(t){return Object.keys(t)}))),(function(t){return u.key(t)})).reduce((function(t,n){return t.indexOf(n)<0&&t.push(n),t}),[]),e={},r=function(r){var i=n[r];e[i]=t.map((function(t){var n={};for(var e in t)u.key(e)?e==i&&(n.value=t[e]):n[e]=t[e];return n}))},i=0;i<n.length;i++)r(i);return e}(r),n)),n)u.key(i)&&e.push({name:i,tweens:H(n[i],t)});return e}function Y(t,n){var e;return t.tweens.map((function(r){var i=function(t,n){var e={};for(var r in t){var i=$(t[r],n);u.arr(i)&&1===(i=i.map((function(t){return $(t,n)}))).length&&(i=i[0]),e[r]=i}return e.duration=parseFloat(e.duration),e.delay=parseFloat(e.delay),e}(r,n),o=i.value,a=u.arr(o)?o[1]:o,s=k(a),c=T(n.target,t.name,s,n),f=e?e.to.original:c,l=u.arr(o)?o[0]:f,d=k(l)||k(c),h=s||d;return u.und(a)&&(a=f),i.from=R(l,h),i.to=R(A(a,l),h),i.start=e?e.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=g(i.easing,i.duration),i.isPath=u.pth(o),i.isColor=u.col(i.from.original),i.isColor&&(i.round=1),e=i,i}))}var Z={css:function(t,n,e){return t.style[n]=e},attribute:function(t,n,e){return t.setAttribute(n,e)},object:function(t,n,e){return t[n]=e},transform:function(t,n,e,r,i){if(r.list.set(n,e),n===r.last||i){var o="";r.list.forEach((function(t,n){o+=n+"("+t+") "})),t.style.transform=o}}};function G(t,n){W(t).forEach((function(t){for(var e in n){var r=$(n[e],t),i=t.target,o=k(r),a=T(i,e,o,t),u=A(E(r,o||k(a)),a),s=P(i,e);Z[s](i,e,u,t.transforms,!0)}}))}function Q(t,n){return m(y(t.map((function(t){return n.map((function(n){return function(t,n){var e=P(t.target,n.name);if(e){var r=Y(n,t),i=r[r.length-1];return{type:e,property:n.name,animatable:t,tweens:r,duration:i.end,delay:r[0].delay,endDelay:i.endDelay}}}(t,n)}))}))),(function(t){return!u.und(t)}))}function V(t,n){var e=t.length,r=function(t){return t.timelineOffset?t.timelineOffset:0},i={};return i.duration=e?Math.max.apply(Math,t.map((function(t){return r(t)+t.duration}))):n.duration,i.delay=e?Math.min.apply(Math,t.map((function(t){return r(t)+t.delay}))):n.delay,i.endDelay=e?i.duration-Math.max.apply(Math,t.map((function(t){return r(t)+t.duration-t.endDelay}))):n.endDelay,i}var U=0;var J,K=[],tt=[],nt=function(){function t(){J=requestAnimationFrame(n)}function n(n){var e=K.length;if(e){for(var r=0;r<e;){var i=K[r];if(i.paused){var o=K.indexOf(i);o>-1&&(K.splice(o,1),e=K.length)}else i.tick(n);r++}t()}else J=cancelAnimationFrame(J)}return t}();function et(e){void 0===e&&(e={});var r,o=0,a=0,u=0,s=0,c=null;function f(t){var n=window.Promise&&new Promise((function(t){return c=t}));return t.finished=n,n}var l=function(e){var r=_(t,e),i=_(n,e),o=X(i,e),a=W(e.targets),u=Q(a,o),s=V(u,i),c=U;return U++,M(r,{id:c,children:[],animatables:a,animations:u,duration:s.duration,delay:s.delay,endDelay:s.endDelay})}(e);f(l);function d(){var t=l.direction;"alternate"!==t&&(l.direction="normal"!==t?"normal":"reverse"),l.reversed=!l.reversed,r.forEach((function(t){return t.reversed=l.reversed}))}function h(t){return l.reversed?l.duration-t:t}function p(){o=0,a=h(l.currentTime)*(1/et.speed)}function g(t,n){n&&n.seek(t-n.timelineOffset)}function v(t){for(var n=0,e=l.animations,r=e.length;n<r;){var o=e[n],a=o.animatable,u=o.tweens,s=u.length-1,c=u[s];s&&(c=m(u,(function(n){return t<n.end}))[0]||c);for(var f=i(t-c.start-c.delay,0,c.duration)/c.duration,d=isNaN(f)?1:c.easing(f),h=c.to.strings,p=c.round,g=[],v=c.to.numbers.length,y=void 0,b=0;b<v;b++){var w=void 0,x=c.to.numbers[b],_=c.from.numbers[b]||0;w=c.isPath?j(c.value,d*x):_+d*(x-_),p&&(c.isColor&&b>2||(w=Math.round(w*p)/p)),g.push(w)}var M=h.length;if(M){y=h[0];for(var C=0;C<M;C++){h[C];var k=h[C+1],$=g[C];isNaN($)||(y+=k?$+k:$+" ")}}else y=g[0];Z[o.type](a.target,o.property,y,a.transforms),o.currentValue=y,n++}}function y(t){l[t]&&!l.passThrough&&l[t](l)}function b(t){var n=l.duration,e=l.delay,p=n-l.endDelay,m=h(t);l.progress=i(m/n*100,0,100),l.reversePlayback=m<l.currentTime,r&&function(t){if(l.reversePlayback)for(var n=s;n--;)g(t,r[n]);else for(var e=0;e<s;e++)g(t,r[e])}(m),!l.began&&l.currentTime>0&&(l.began=!0,y("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,y("loopBegin")),m<=e&&0!==l.currentTime&&v(0),(m>=p&&l.currentTime!==n||!n)&&v(n),m>e&&m<p?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,y("changeBegin")),y("change"),v(m)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,y("changeComplete")),l.currentTime=i(m,0,n),l.began&&y("update"),t>=n&&(a=0,l.remaining&&!0!==l.remaining&&l.remaining--,l.remaining?(o=u,y("loopComplete"),l.loopBegan=!1,"alternate"===l.direction&&d()):(l.paused=!0,l.completed||(l.completed=!0,y("loopComplete"),y("complete"),!l.passThrough&&"Promise"in window&&(c(),f(l)))))}return l.reset=function(){var t=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed="reverse"===t,l.remaining=l.loop,r=l.children;for(var n=s=r.length;n--;)l.children[n].reset();(l.reversed&&!0!==l.loop||"alternate"===t&&1===l.loop)&&l.remaining++,v(l.reversed?l.duration:0)},l.set=function(t,n){return G(t,n),l},l.tick=function(t){u=t,o||(o=u),b((u+(a-o))*et.speed)},l.seek=function(t){b(h(t))},l.pause=function(){l.paused=!0,p()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,K.push(l),p(),J||nt())},l.reverse=function(){d(),l.completed=!l.reversed,p()},l.restart=function(){l.reset(),l.play()},l.reset(),l.autoplay&&l.play(),l}function rt(t,n){for(var e=n.length;e--;)w(t,n[e].animatable.target)&&n.splice(e,1)}"undefined"!=typeof document&&document.addEventListener("visibilitychange",(function(){document.hidden?(K.forEach((function(t){return t.pause()})),tt=K.slice(0),et.running=K=[]):tt.forEach((function(t){return t.play()}))})),et.version="3.2.0",et.speed=1,et.running=K,et.remove=function(t){for(var n=q(t),e=K.length;e--;){var r=K[e],i=r.animations,o=r.children;rt(n,i);for(var a=o.length;a--;){var u=o[a],s=u.animations;rt(n,s),s.length||u.children.length||o.splice(a,1)}i.length||o.length||r.pause()}},et.get=T,et.set=G,et.convertPx=F,et.path=function(t,n){var e=u.str(t)?v(t)[0]:t,r=n||100;return function(t){return{property:t,el:e,svg:z(e),totalLength:I(e)*(r/100)}}},et.setDashoffset=function(t){var n=I(t);return t.setAttribute("stroke-dasharray",n),n},et.stagger=function(t,n){void 0===n&&(n={});var e=n.direction||"normal",r=n.easing?g(n.easing):null,i=n.grid,o=n.axis,a=n.from||0,s="first"===a,c="center"===a,f="last"===a,l=u.arr(t),d=l?parseFloat(t[0]):parseFloat(t),h=l?parseFloat(t[1]):0,p=k(l?t[1]:t)||0,v=n.start||0+(l?d:0),m=[],y=0;return function(t,n,u){if(s&&(a=0),c&&(a=(u-1)/2),f&&(a=u-1),!m.length){for(var g=0;g<u;g++){if(i){var b=c?(i[0]-1)/2:a%i[0],w=c?(i[1]-1)/2:Math.floor(a/i[0]),x=b-g%i[0],_=w-Math.floor(g/i[0]),M=Math.sqrt(x*x+_*_);"x"===o&&(M=-x),"y"===o&&(M=-_),m.push(M)}else m.push(Math.abs(a-g));y=Math.max.apply(Math,m)}r&&(m=m.map((function(t){return r(t/y)*y}))),"reverse"===e&&(m=m.map((function(t){return o?t<0?-1*t:-t:Math.abs(y-t)})))}return v+(l?(h-d)/y:d)*(Math.round(100*m[n])/100)+p}},et.timeline=function(t){void 0===t&&(t={});var e=et(t);return e.duration=0,e.add=function(r,i){var o=K.indexOf(e),a=e.children;function s(t){t.passThrough=!0}o>-1&&K.splice(o,1);for(var c=0;c<a.length;c++)s(a[c]);var f=M(r,_(n,t));f.targets=f.targets||t.targets;var l=e.duration;f.autoplay=!1,f.direction=e.direction,f.timelineOffset=u.und(i)?l:A(i,l),s(e),e.seek(f.timelineOffset);var d=et(f);s(d),a.push(d);var h=V(a,t);return e.delay=h.delay,e.endDelay=h.endDelay,e.duration=h.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e},et.easing=g,et.penner=p,et.random=function(t,n){return Math.floor(Math.random()*(n-t+1))+t};let it=1;const ot={version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:ev":"http://www.w3.org/2001/xml-events"};function at(t,n){if(n)for(const e in ot)t&&void 0===n[e]&&t.hasAttribute(e)&&(n[e]=t.getAttribute(e)),void 0!==n[e]&&null!==n[e]&&""!==n[e]||(n[e]=ot[e])}function ut(t,n={}){const e=document.createElementNS("http://www.w3.org/2000/svg",t);for(const t in n)e.setAttribute(t,n[t]);return e}function st(t=1,n=0,e=0,r=1,i=0,o=0){return{a:t,b:n,c:e,d:r,e:i,f:o}}function ct(t){const n=t.hasAttribute("transform");return!n||n.indexOf("matrix")<0?st():st(...n.split(","))}function ft(t,n,e,r={}){return r.cx=t,r.cy=n,r.r=e,ut("circle",r)}function lt(t=[],n={}){const e=ut("g",n);for(const n of t)e.appendChild(n);return e}function dt(t,n={}){return n.href=t,ut("image",n)}function ht(t,n={}){return n.d=t,ut("path",n)}function pt(t,n,e=0,r=0){const i=Math.cos(n),o=Math.sin(n),{a:a,b:u,c:s,d:c,e:f,f:l}=ct(t),d=a*i-u*o,h=u*i+a*o,p=s*i-c*o,g=c*i+s*o,v=f*i-l*o+r*o-e*i+e,m=l*i+f*o-e*o-r*i+r;t.setAttribute("transform",`matrix(${d},${h},${p},${g},${v},${m})`)}function gt(t,n={}){const e=ut("text",n);return e.textContent=t,e}function vt(t,n,e=n){const{a:r,b:i,c:o,d:a,e:u,f:s}=ct(t);t.setAttribute("transform",`matrix(${r},${i},${o},${a},${u+n},${s+e})`)}function mt(t){return t*Math.PI/180}function yt(t,n,e,r){const i=mt(r-90);return{x:t+e*Math.cos(i),y:n+e*Math.sin(i)}}const bt={default:{border:"red",prize:"gold",button:"darkorange",line:"red",prizeFont:"red",buttonFont:"white"},light:{border:"orange",prize:"lightyellow",button:"tomato",line:"orange",prizeFont:"orange",buttonFont:"white"},dark:{border:"silver",prize:"dimgray",button:"darkslategray",line:"silver",prizeFont:"silver",buttonFont:"lightyellow"}};function wt(t,n,e,r,i){const o=yt(t,n,e,i),a=yt(t,n,e,r),u=i-r<=180?0:1;return[`M ${o.x} ${o.y} A ${e} ${e} 0 ${u} 0 ${a.x} ${a.y} L ${t} ${n} L ${o.x} ${o.y}`,o.x-a.x,o,a]}return class{constructor(t={}){if(this.option={pos:[0,0],radius:100,buttonWidth:50,buttonDeg:80,buttonText:"Draw",textBottomPercentage:.6,limit:0,duration:5e3,turn:4,clockwise:!0,draw:!0,theme:"default",...t},!this.option.el)throw new Error("el is undefined");if(!this.option.data)throw new Error("data is undefined");const n=this.option.data.length;if(n<3||n>12)throw new Error("data.length must between 3 and 12");this._count=0,this._rotation=0,this._weight=[],this._weightSum=0,this._running=!1,this._checkPrize(),this.option.draw&&this.draw()}_checkPrize(){const t=this.option.data;for(const n in t){const e=t[n];t[n]="string"==typeof e?{text:e,chance:1}:{...t[n],text:e.text||n,chance:e.chance>0?e.chance:1},this._weight.push(Number(t[n].chance)),this._weightSum+=Number(t[n].chance)}}draw(){const t=this.option;this._center=t.pos.map(n=>n+t.radius);const n={width:2*t.radius,height:2*t.radius};"svg"!==t.el.tagName?(this._svg=function(t={}){return at(null,t),ut("svg",t)}(n),t.el.appendChild(this._svg)):(this._svg=t.el,function(t,n={}){if("svg"===t.tagName){at(t,n);for(const e in n)t.setAttribute(e,n[e])}}(t.el,n)),this._deg=360/t.data.length,t.image&&this._drawResource(),this._drawDefault(),this._animeFunc()}_drawDefault(){if(this._turntable&&this._button)return;const t=this.option,n=bt[t.theme]||bt.default;var e;t.color={...n,...t.color},t.inRadius?t.inRadius>t.radius&&(t.inRadius=t.radius):t.inRadius=(e=t.radius)<50?e:e<100?e-10:9*Math.round(e/10),this._turntable||this._drawTurntable(),this._button||this._drawButton()}_drawResource(){const t=this.option,n=t.image;if("object"==typeof n&&Object.keys(n).length>0&&(n.turntable&&"string"==typeof n.turntable&&(this._turntable=dt(n.turntable,{width:2*t.radius,height:2*t.radius,x:t.pos[0],y:t.pos[1]}),this._svg.appendChild(this._turntable)),n.button&&"string"==typeof n.button)){n.offset&&"number"==typeof n.offset||(n.offset=0);const e=[50,50],r=e[1]*t.buttonWidth/e[0];this._button=dt(n.button,{width:t.buttonWidth,height:r,x:this._center[0]-t.buttonWidth/2,y:this._center[1]+n.offset-r/2}),this._svg.appendChild(this._button)}}_drawTurntable(){if(this._turntable)return;const t=this.option;this._svg.appendChild(ft(this._center[0],this._center[1],t.radius,{fill:t.color.border})),this._svg.appendChild(ft(this._center[0],this._center[1],t.inRadius,{fill:t.color.prize})),this._turntable=lt(),this._svg.appendChild(this._turntable);for(const n of t.data){const[e,r]=wt(this._center[0],this._center[1],t.inRadius,-this._deg/2,this._deg/2),i=ht(e,{fill:n.color||t.color.prize,stroke:t.color.line,strokeWidth:2});let o=n.fontSize||t.fontSize;if(!o){let e=0;for(let t=0;t<n.text.length;++t)n.text[t].match(/\w/)?e+=1:e+=2;o=16*e/2>r*t.textBottomPercentage?r*t.textBottomPercentage/e*2:16}const a=gt(n.text,{x:this._center[0],y:t.pos[1]+t.radius-t.inRadius*t.textBottomPercentage,fontSize:o,fill:n.fontColor||t.color.prizeFont}),u=lt([i,a]);pt(u,mt(this._deg*t.data.indexOf(n)),this._center[0],this._center[1]),this._turntable.appendChild(u),vt(a,-a.getComputedTextLength()/2,0)}}_drawButton(){if(this._button)return;const t=this.option;if(t.button&&"string"==typeof t.button)return;const n=t.buttonWidth/2,e=this._center,r=(180-t.buttonDeg)/2,[i,,,o]=wt(e[0],e[1],n,r-360,360-r),a=[e[0],e[1]-n/Math.cos(mt(r))],u=ht(`${i} L ${a[0]} ${a[1]} L ${o.x} ${o.y} L ${e[0]} ${e[1]}`,{fill:t.color.button});!function(t,n,e={}){const r="drop-shadow-"+it++,i=ut("defs"),o=ut("filter",{id:r,filterUnits:"userSpaceOnUse"}),a=ut("feGaussianBlur",{in:"SourceAlpha",stdDeviation:e.blurStdDeviation||0}),u=ut("feOffset",{dx:e.offsetDx||0,dy:e.offsetDy||0}),s=ut("feComponentTransfer"),c=ut("feFuncA",{type:"linear",slope:.5});s.appendChild(c);const f=ut("feMerge"),l=ut("feMergeNode"),d=ut("feMergeNode",{in:"SourceGraphic"});f.appendChild(l),f.appendChild(d),o.appendChild(a),o.appendChild(u),o.appendChild(s),o.appendChild(f),i.appendChild(o),t.appendChild(i),n.setAttribute("filter",`url(#${r})`)}(this._svg,u,{blurStdDeviation:3,offsetDy:3});let s=null;if(""!==t.buttonText){const r=2*n*.8;let i=t.buttonFontSize;if(!i){let n=0;for(let e=0;e<t.buttonText.length;++e)t.buttonText[e].match(/\w/)?n+=1:n+=2;i=16*n/2>r?r/n*2:16}s=gt(t.buttonText,{x:e[0],y:e[1],fontSize:i,fill:t.color.buttonFont})}this._button=lt([u,s]),this._svg.appendChild(this._button),vt(s,-s.getComputedTextLength()/2,0)}_animeFunc(){const t=this.option;this._turntable.style["transform-origin"]="center",this._button.style.cursor="pointer",this._button.style["transform-origin"]="center",this._button.addEventListener("mouseover",()=>{t.onButtonHover&&"function"==typeof t.onButtonHover?t.onButtonHover(et,this._button):et({targets:this._button,scale:1.2,duration:500})}),this._button.addEventListener("mouseout",()=>{et({targets:this._button,scale:1,duration:500})}),this._button.addEventListener("click",()=>{this._run()})}_run(){if(this._running)return;const t=this.option;if(t.limit>0&&this._count>=t.limit)return void(t.onFail&&"function"==typeof t.onFail&&t.onFail());const n=n=>{if(this._rotation>0){const t=360-this._rotation%360;this._rotation+=t}var e,r;this._rotation+=(e=n,r=this._deg,360*t.turn+e*r),et({targets:this._turntable,rotate:t.clockwise?this._rotation+"deg":"-"+this._rotation+"deg",duration:t.duration,begin:()=>{this._running=!0},complete:()=>{if(this._running=!1,++this._count,t.onSuccess&&"function"==typeof t.onSuccess){const e=t.clockwise?t.data[(t.data.length-n)%t.data.length]:t.data[n];t.onSuccess(e)}}})},e=Math.random()*this._weightSum;let r=0,i=0;for(const t in this._weight)if(r+=this._weight[t],r>e){i=t,n(i);break}}}}));
