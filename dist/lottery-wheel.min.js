!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Wheel=e()}(this,(function(){"use strict";var t={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},e={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},n=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],r={CSS:{},springs:{}};function i(t,e,n){return Math.min(Math.max(t,e),n)}function s(t,e){return t.indexOf(e)>-1}function o(t,e){return t.apply(null,e)}var a={arr:function(t){return Array.isArray(t)},obj:function(t){return s(Object.prototype.toString.call(t),"Object")},pth:function(t){return a.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return t.nodeType||a.svg(t)},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return a.hex(t)||a.rgb(t)||a.hsl(t)},key:function(n){return!t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&"targets"!==n&&"keyframes"!==n}};function h(t){var e=/\(([^)]+)\)/.exec(t);return e?e[1].split(",").map((function(t){return parseFloat(t)})):[]}function u(t,e){var n=h(t),s=i(a.und(n[0])?1:n[0],.1,100),o=i(a.und(n[1])?100:n[1],.1,100),u=i(a.und(n[2])?10:n[2],.1,100),l=i(a.und(n[3])?0:n[3],.1,100),c=Math.sqrt(o/s),f=u/(2*Math.sqrt(o*s)),d=f<1?c*Math.sqrt(1-f*f):0,p=f<1?(f*c-l)/d:-l+c;function m(t){var n=e?e*t/1e3:t;return n=f<1?Math.exp(-n*f*c)*(1*Math.cos(d*n)+p*Math.sin(d*n)):(1+p*n)*Math.exp(-n*c),0===t||1===t?t:1-n}return e?m:function(){var e=r.springs[t];if(e)return e;for(var n=0,i=0;;)if(1===m(n+=1/6)){if(++i>=16)break}else i=0;var s=n*(1/6)*1e3;return r.springs[t]=s,s}}function l(t){return void 0===t&&(t=10),function(e){return Math.ceil(i(e,1e-6,1)*t)*(1/t)}}var c,f,d=function(){function t(t,e){return 1-3*e+3*t}function e(t,e){return 3*e-6*t}function n(t){return 3*t}function r(r,i,s){return((t(i,s)*r+e(i,s))*r+n(i))*r}function i(r,i,s){return 3*t(i,s)*r*r+2*e(i,s)*r+n(i)}return function(t,e,n,s){if(0<=t&&t<=1&&0<=n&&n<=1){var o=new Float32Array(11);if(t!==e||n!==s)for(var a=0;a<11;++a)o[a]=r(.1*a,t,n);return function(i){return t===e&&n===s||0===i||1===i?i:r(h(i),e,s)}}function h(e){for(var s=0,a=1;10!==a&&o[a]<=e;++a)s+=.1;--a;var h=s+.1*((e-o[a])/(o[a+1]-o[a])),u=i(h,t,n);return u>=.001?function(t,e,n,s){for(var o=0;o<4;++o){var a=i(e,n,s);if(0===a)return e;e-=(r(e,n,s)-t)/a}return e}(e,h,t,n):0===u?h:function(t,e,n,i,s){var o,a,h=0;do{(o=r(a=e+(n-e)/2,i,s)-t)>0?n=a:e=a}while(Math.abs(o)>1e-7&&++h<10);return a}(e,s,s+.1,t,n)}}}(),p=(c={linear:function(){return function(t){return t}}},f={Sine:function(){return function(t){return 1-Math.cos(t*Math.PI/2)}},Circ:function(){return function(t){return 1-Math.sqrt(1-t*t)}},Back:function(){return function(t){return t*t*(3*t-2)}},Bounce:function(){return function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}},Elastic:function(t,e){void 0===t&&(t=1),void 0===e&&(e=.5);var n=i(t,1,10),r=i(e,.1,2);return function(t){return 0===t||1===t?t:-n*Math.pow(2,10*(t-1))*Math.sin((t-1-r/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/r)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(t,e){f[t]=function(){return function(t){return Math.pow(t,e+2)}}})),Object.keys(f).forEach((function(t){var e=f[t];c["easeIn"+t]=e,c["easeOut"+t]=function(t,n){return function(r){return 1-e(t,n)(1-r)}},c["easeInOut"+t]=function(t,n){return function(r){return r<.5?e(t,n)(2*r)/2:1-e(t,n)(-2*r+2)/2}}})),c);function m(t,e){if(a.fnc(t))return t;var n=t.split("(")[0],r=p[n],i=h(t);switch(n){case"spring":return u(t,e);case"cubicBezier":return o(d,i);case"steps":return o(l,i);default:return o(r,i)}}function g(t){try{return document.querySelectorAll(t)}catch(t){return}}function y(t,e){for(var n=t.length,r=arguments.length>=2?arguments[1]:void 0,i=[],s=0;s<n;s++)if(s in t){var o=t[s];e.call(r,o,s,t)&&i.push(o)}return i}function v(t){return t.reduce((function(t,e){return t.concat(a.arr(e)?v(e):e)}),[])}function w(t){return a.arr(t)?t:(a.str(t)&&(t=g(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function _(t,e){return t.some((function(t){return t===e}))}function x(t){var e={};for(var n in t)e[n]=t[n];return e}function b(t,e){var n=x(t);for(var r in t)n[r]=e.hasOwnProperty(r)?e[r]:t[r];return n}function M(t,e){var n=x(t);for(var r in e)n[r]=a.und(t[r])?e[r]:t[r];return n}function O(t){return a.rgb(t)?function(t){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t);return e?"rgba("+e[1]+",1)":t}(t):a.hex(t)?function(t){var e=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,r){return e+e+n+n+r+r})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(t):a.hsl(t)?function(t){var e,n,r,i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),s=parseInt(i[1],10)/360,o=parseInt(i[2],10)/100,a=parseInt(i[3],10)/100,h=i[4]||1;function u(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(0==o)e=n=r=a;else{var l=a<.5?a*(1+o):a+o-a*o,c=2*a-l;e=u(c,l,s+1/3),n=u(c,l,s),r=u(c,l,s-1/3)}return"rgba("+255*e+","+255*n+","+255*r+","+h+")"}(t):void 0}function k(t){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(e)return e[1]}function C(t,e){return a.fnc(t)?t(e.target,e.id,e.total):t}function A(t,e){return t.getAttribute(e)}function T(t,e,n){if(_([n,"deg","rad","turn"],k(e)))return e;var i=r.CSS[e+n];if(!a.und(i))return i;var s=document.createElement(t.tagName),o=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;o.appendChild(s),s.style.position="absolute",s.style.width=100+n;var h=100/s.offsetWidth;o.removeChild(s);var u=h*parseFloat(e);return r.CSS[e+n]=u,u}function S(t,e,n){if(e in t.style){var r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=t.style[e]||getComputedStyle(t).getPropertyValue(r)||"0";return n?T(t,i,n):i}}function E(t,e){return a.dom(t)&&!a.inp(t)&&(A(t,e)||a.svg(t)&&t[e])?"attribute":a.dom(t)&&_(n,e)?"transform":a.dom(t)&&"transform"!==e&&S(t,e)?"css":null!=t[e]?"object":void 0}function N(t){if(a.dom(t)){for(var e,n=t.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map;e=r.exec(n);)i.set(e[1],e[2]);return i}}function j(t,e,n,r){var i=s(e,"scale")?1:0+function(t){return s(t,"translate")||"perspective"===t?"px":s(t,"rotate")||s(t,"skew")?"deg":void 0}(e),o=N(t).get(e)||i;return n&&(n.transforms.list.set(e,o),n.transforms.last=e),r?T(t,o,r):o}function D(t,e,n,r){switch(E(t,e)){case"transform":return j(t,e,r,n);case"css":return S(t,e,n);case"attribute":return A(t,e);default:return t[e]||0}}function L(t,e){var n=/^(\*=|\+=|-=)/.exec(t);if(!n)return t;var r=k(t)||0,i=parseFloat(e),s=parseFloat(t.replace(n[0],""));switch(n[0][0]){case"+":return i+s+r;case"-":return i-s+r;case"*":return i*s+r}}function F(t,e){if(a.col(t))return O(t);if(/\s/g.test(t))return t;var n=k(t),r=n?t.substr(0,t.length-n.length):t;return e?r+e:r}function z(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function P(t){for(var e,n=t.points,r=0,i=0;i<n.numberOfItems;i++){var s=n.getItem(i);i>0&&(r+=z(e,s)),e=s}return r}function I(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return function(t){return 2*Math.PI*A(t,"r")}(t);case"rect":return function(t){return 2*A(t,"width")+2*A(t,"height")}(t);case"line":return function(t){return z({x:A(t,"x1"),y:A(t,"y1")},{x:A(t,"x2"),y:A(t,"y2")})}(t);case"polyline":return P(t);case"polygon":return function(t){var e=t.points;return P(t)+z(e.getItem(e.numberOfItems-1),e.getItem(0))}(t)}}function R(t,e){var n=e||{},r=n.el||function(t){for(var e=t.parentNode;a.svg(e)&&a.svg(e.parentNode);)e=e.parentNode;return e}(t),i=r.getBoundingClientRect(),s=A(r,"viewBox"),o=i.width,h=i.height,u=n.viewBox||(s?s.split(" "):[0,0,o,h]);return{el:r,viewBox:u,x:u[0]/1,y:u[1]/1,w:o/u[2],h:h/u[3]}}function q(t,e){function n(n){void 0===n&&(n=0);var r=e+n>=1?e+n:0;return t.el.getPointAtLength(r)}var r=R(t.el,t.svg),i=n(),s=n(-1),o=n(1);switch(t.property){case"x":return(i.x-r.x)*r.w;case"y":return(i.y-r.y)*r.h;case"angle":return 180*Math.atan2(o.y-s.y,o.x-s.x)/Math.PI}}function B(t,e){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=F(a.pth(t)?t.totalLength:t,e)+"";return{original:r,numbers:r.match(n)?r.match(n).map(Number):[0],strings:a.str(t)||e?r.split(n):[]}}function $(t){return y(t?v(a.arr(t)?t.map(w):w(t)):[],(function(t,e,n){return n.indexOf(t)===e}))}function Y(t){var e=$(t);return e.map((function(t,n){return{target:t,id:n,total:e.length,transforms:{list:N(t)}}}))}function X(t,e){var n=x(e);if(/^spring/.test(n.easing)&&(n.duration=u(n.easing)),a.arr(t)){var r=t.length;2===r&&!a.obj(t[0])?t={value:t}:a.fnc(e.duration)||(n.duration=e.duration/r)}var i=a.arr(t)?t:[t];return i.map((function(t,n){var r=a.obj(t)&&!a.pth(t)?t:{value:t};return a.und(r.delay)&&(r.delay=n?0:e.delay),a.und(r.endDelay)&&(r.endDelay=n===i.length-1?e.endDelay:0),r})).map((function(t){return M(t,n)}))}function H(t,e){var n=[],r=e.keyframes;for(var i in r&&(e=M(function(t){for(var e=y(v(t.map((function(t){return Object.keys(t)}))),(function(t){return a.key(t)})).reduce((function(t,e){return t.indexOf(e)<0&&t.push(e),t}),[]),n={},r=function(r){var i=e[r];n[i]=t.map((function(t){var e={};for(var n in t)a.key(n)?n==i&&(e.value=t[n]):e[n]=t[n];return e}))},i=0;i<e.length;i++)r(i);return n}(r),e)),e)a.key(i)&&n.push({name:i,tweens:X(e[i],t)});return n}function V(t,e){var n;return t.tweens.map((function(r){var i=function(t,e){var n={};for(var r in t){var i=C(t[r],e);a.arr(i)&&1===(i=i.map((function(t){return C(t,e)}))).length&&(i=i[0]),n[r]=i}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(r,e),s=i.value,o=a.arr(s)?s[1]:s,h=k(o),u=D(e.target,t.name,h,e),l=n?n.to.original:u,c=a.arr(s)?s[0]:l,f=k(c)||k(u),d=h||f;return a.und(o)&&(o=l),i.from=B(c,d),i.to=B(L(o,c),d),i.start=n?n.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=m(i.easing,i.duration),i.isPath=a.pth(s),i.isColor=a.col(i.from.original),i.isColor&&(i.round=1),n=i,i}))}var G={css:function(t,e,n){return t.style[e]=n},attribute:function(t,e,n){return t.setAttribute(e,n)},object:function(t,e,n){return t[e]=n},transform:function(t,e,n,r,i){if(r.list.set(e,n),e===r.last||i){var s="";r.list.forEach((function(t,e){s+=e+"("+t+") "})),t.style.transform=s}}};function W(t,e){Y(t).forEach((function(t){for(var n in e){var r=C(e[n],t),i=t.target,s=k(r),o=D(i,n,s,t),a=L(F(r,s||k(o)),o),h=E(i,n);G[h](i,n,a,t.transforms,!0)}}))}function U(t,e){return y(v(t.map((function(t){return e.map((function(e){return function(t,e){var n=E(t.target,e.name);if(n){var r=V(e,t),i=r[r.length-1];return{type:n,property:e.name,animatable:t,tweens:r,duration:i.end,delay:r[0].delay,endDelay:i.endDelay}}}(t,e)}))}))),(function(t){return!a.und(t)}))}function Q(t,e){var n=t.length,r=function(t){return t.timelineOffset?t.timelineOffset:0},i={};return i.duration=n?Math.max.apply(Math,t.map((function(t){return r(t)+t.duration}))):e.duration,i.delay=n?Math.min.apply(Math,t.map((function(t){return r(t)+t.delay}))):e.delay,i.endDelay=n?i.duration-Math.max.apply(Math,t.map((function(t){return r(t)+t.duration-t.endDelay}))):e.endDelay,i}var Z=0;var J,K=[],tt=[],et=function(){function t(){J=requestAnimationFrame(e)}function e(e){var n=K.length;if(n){for(var r=0;r<n;){var i=K[r];if(i.paused){var s=K.indexOf(i);s>-1&&(K.splice(s,1),n=K.length)}else i.tick(e);r++}t()}else J=cancelAnimationFrame(J)}return t}();function nt(n){void 0===n&&(n={});var r,s=0,o=0,a=0,h=0,u=null;function l(t){var e=window.Promise&&new Promise((function(t){return u=t}));return t.finished=e,e}var c=function(n){var r=b(t,n),i=b(e,n),s=H(i,n),o=Y(n.targets),a=U(o,s),h=Q(a,i),u=Z;return Z++,M(r,{id:u,children:[],animatables:o,animations:a,duration:h.duration,delay:h.delay,endDelay:h.endDelay})}(n);l(c);function f(){var t=c.direction;"alternate"!==t&&(c.direction="normal"!==t?"normal":"reverse"),c.reversed=!c.reversed,r.forEach((function(t){return t.reversed=c.reversed}))}function d(t){return c.reversed?c.duration-t:t}function p(){s=0,o=d(c.currentTime)*(1/nt.speed)}function m(t,e){e&&e.seek(t-e.timelineOffset)}function g(t){for(var e=0,n=c.animations,r=n.length;e<r;){var s=n[e],o=s.animatable,a=s.tweens,h=a.length-1,u=a[h];h&&(u=y(a,(function(e){return t<e.end}))[0]||u);for(var l=i(t-u.start-u.delay,0,u.duration)/u.duration,f=isNaN(l)?1:u.easing(l),d=u.to.strings,p=u.round,m=[],g=u.to.numbers.length,v=void 0,w=0;w<g;w++){var _=void 0,x=u.to.numbers[w],b=u.from.numbers[w]||0;_=u.isPath?q(u.value,f*x):b+f*(x-b),p&&(u.isColor&&w>2||(_=Math.round(_*p)/p)),m.push(_)}var M=d.length;if(M){v=d[0];for(var O=0;O<M;O++){d[O];var k=d[O+1],C=m[O];isNaN(C)||(v+=k?C+k:C+" ")}}else v=m[0];G[s.type](o.target,s.property,v,o.transforms),s.currentValue=v,e++}}function v(t){c[t]&&!c.passThrough&&c[t](c)}function w(t){var e=c.duration,n=c.delay,p=e-c.endDelay,y=d(t);c.progress=i(y/e*100,0,100),c.reversePlayback=y<c.currentTime,r&&function(t){if(c.reversePlayback)for(var e=h;e--;)m(t,r[e]);else for(var n=0;n<h;n++)m(t,r[n])}(y),!c.began&&c.currentTime>0&&(c.began=!0,v("begin")),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,v("loopBegin")),y<=n&&0!==c.currentTime&&g(0),(y>=p&&c.currentTime!==e||!e)&&g(e),y>n&&y<p?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,v("changeBegin")),v("change"),g(y)):c.changeBegan&&(c.changeCompleted=!0,c.changeBegan=!1,v("changeComplete")),c.currentTime=i(y,0,e),c.began&&v("update"),t>=e&&(o=0,c.remaining&&!0!==c.remaining&&c.remaining--,c.remaining?(s=a,v("loopComplete"),c.loopBegan=!1,"alternate"===c.direction&&f()):(c.paused=!0,c.completed||(c.completed=!0,v("loopComplete"),v("complete"),!c.passThrough&&"Promise"in window&&(u(),l(c)))))}return c.reset=function(){var t=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed="reverse"===t,c.remaining=c.loop,r=c.children;for(var e=h=r.length;e--;)c.children[e].reset();(c.reversed&&!0!==c.loop||"alternate"===t&&1===c.loop)&&c.remaining++,g(c.reversed?c.duration:0)},c.set=function(t,e){return W(t,e),c},c.tick=function(t){a=t,s||(s=a),w((a+(o-s))*nt.speed)},c.seek=function(t){w(d(t))},c.pause=function(){c.paused=!0,p()},c.play=function(){c.paused&&(c.completed&&c.reset(),c.paused=!1,K.push(c),p(),J||et())},c.reverse=function(){f(),c.completed=!c.reversed,p()},c.restart=function(){c.reset(),c.play()},c.reset(),c.autoplay&&c.play(),c}function rt(t,e){for(var n=e.length;n--;)_(t,e[n].animatable.target)&&e.splice(n,1)}"undefined"!=typeof document&&document.addEventListener("visibilitychange",(function(){document.hidden?(K.forEach((function(t){return t.pause()})),tt=K.slice(0),nt.running=K=[]):tt.forEach((function(t){return t.play()}))})),nt.version="3.2.0",nt.speed=1,nt.running=K,nt.remove=function(t){for(var e=$(t),n=K.length;n--;){var r=K[n],i=r.animations,s=r.children;rt(e,i);for(var o=s.length;o--;){var a=s[o],h=a.animations;rt(e,h),h.length||a.children.length||s.splice(o,1)}i.length||s.length||r.pause()}},nt.get=D,nt.set=W,nt.convertPx=T,nt.path=function(t,e){var n=a.str(t)?g(t)[0]:t,r=e||100;return function(t){return{property:t,el:n,svg:R(n),totalLength:I(n)*(r/100)}}},nt.setDashoffset=function(t){var e=I(t);return t.setAttribute("stroke-dasharray",e),e},nt.stagger=function(t,e){void 0===e&&(e={});var n=e.direction||"normal",r=e.easing?m(e.easing):null,i=e.grid,s=e.axis,o=e.from||0,h="first"===o,u="center"===o,l="last"===o,c=a.arr(t),f=c?parseFloat(t[0]):parseFloat(t),d=c?parseFloat(t[1]):0,p=k(c?t[1]:t)||0,g=e.start||0+(c?f:0),y=[],v=0;return function(t,e,a){if(h&&(o=0),u&&(o=(a-1)/2),l&&(o=a-1),!y.length){for(var m=0;m<a;m++){if(i){var w=u?(i[0]-1)/2:o%i[0],_=u?(i[1]-1)/2:Math.floor(o/i[0]),x=w-m%i[0],b=_-Math.floor(m/i[0]),M=Math.sqrt(x*x+b*b);"x"===s&&(M=-x),"y"===s&&(M=-b),y.push(M)}else y.push(Math.abs(o-m));v=Math.max.apply(Math,y)}r&&(y=y.map((function(t){return r(t/v)*v}))),"reverse"===n&&(y=y.map((function(t){return s?t<0?-1*t:-t:Math.abs(v-t)})))}return g+(c?(d-f)/v:f)*(Math.round(100*y[e])/100)+p}},nt.timeline=function(t){void 0===t&&(t={});var n=nt(t);return n.duration=0,n.add=function(r,i){var s=K.indexOf(n),o=n.children;function h(t){t.passThrough=!0}s>-1&&K.splice(s,1);for(var u=0;u<o.length;u++)h(o[u]);var l=M(r,b(e,t));l.targets=l.targets||t.targets;var c=n.duration;l.autoplay=!1,l.direction=n.direction,l.timelineOffset=a.und(i)?c:L(i,c),h(n),n.seek(l.timelineOffset);var f=nt(l);h(f),o.push(f);var d=Q(o,t);return n.delay=d.delay,n.endDelay=d.endDelay,n.duration=d.duration,n.seek(0),n.reset(),n.autoplay&&n.play(),n},n},nt.easing=m,nt.penner=p,nt.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};const it={},st=[];function ot(t,e){if(Array.isArray(t))for(const n of t)ot(n,e);else if("object"!=typeof t)ht(Object.getOwnPropertyNames(e)),it[t]=Object.assign(it[t]||{},e);else for(const e in t)ot(e,t[e])}function at(t){return it[t]||{}}function ht(t){st.push(...t)}function ut(t,e){var n,r=t.length,i=[];for(n=0;n<r;n++)i.push(e(t[n]));return i}function lt(t){return t%360*Math.PI/180}function ct(t){return t.toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}function ft(t){return t.charAt(0).toUpperCase()+t.slice(1)}function dt(t,e,n,r){return null!=e&&null!=n||(r=r||t.bbox(),null==e?e=r.width/r.height*n:null==n&&(n=r.height/r.width*e)),{width:e,height:n}}function pt(t,e){const n=t.origin;let r,i;if("string"==typeof n||null==n){const s=(n||"center").toLowerCase().trim(),{height:o,width:a,x:h,y:u}=e.bbox(),l=s.includes("left")?h:s.includes("right")?h+a:h+a/2,c=s.includes("top")?u:s.includes("bottom")?u+o:u+o/2;r=null!=t.ox?t.ox:l,i=null!=t.oy?t.oy:c}else r=n[0],i=n[1];return[r,i]}const mt="http://www.w3.org/2000/svg",gt="http://www.w3.org/2000/xmlns/",yt="http://www.w3.org/1999/xlink",vt={window:"undefined"==typeof window?null:window,document:"undefined"==typeof document?null:document};class wt{}const _t={},xt="___SYMBOL___ROOT___";function bt(t){return vt.document.createElementNS(mt,t)}function Mt(t){if(t instanceof wt)return t;if("object"==typeof t)return Ct(t);if(null==t)return new _t[xt];if("string"==typeof t&&"<"!==t.charAt(0))return Ct(vt.document.querySelector(t));var e=bt("svg");return e.innerHTML=t,t=Ct(e.firstChild)}function Ot(t,e){return e instanceof vt.window.Node?e:bt(t)}function kt(t){if(!t)return null;if(t.instance instanceof wt)return t.instance;var e=ft(t.nodeName||"Dom");return"LinearGradient"===e||"RadialGradient"===e?e="Gradient":_t[e]||(e="Dom"),new _t[e](t)}let Ct=kt;function At(t,e=t.name,n=!1){return _t[e]=t,n&&(_t[xt]=t),ht(Object.getOwnPropertyNames(t.prototype)),t}let Tt=1e3;function St(t){return"Svgjs"+ft(t)+Tt++}function Et(t,e,n){var r,i;for(i=(t=Array.isArray(t)?t:[t]).length-1;i>=0;i--)for(r in e){let s=e[r];n&&(s=Nt(e[r])),t[i].prototype[r]=s}}function Nt(t){return function(...e){const n=e[e.length-1];return!n||n.constructor!==Object||n instanceof Array?t.apply(this,e):t.apply(this,e.slice(0,-1)).attr(n)}}ot("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),"function"==typeof e.isRoot&&e.isRoot()&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),"function"==typeof t.isRoot&&t.isRoot()&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){(t=Mt(t)).remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){(t=Mt(t)).remove();var e=this.position();return this.parent().add(t,e+1),this},insertBefore:function(t){return(t=Mt(t)).before(this),this},insertAfter:function(t){return(t=Mt(t)).after(this),this}});const jt=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,Dt=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Lt=/rgb\((\d+),(\d+),(\d+)\)/,Ft=/(#[a-z0-9\-_]+)/i,zt=/\)\s*,?\s*/,Pt=/\s/g,It=/^#[a-f0-9]{3,6}$/i,Rt=/^rgb\(/,qt=/^(\s+)?$/,Bt=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,$t=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,Yt=/[\s,]+/,Xt=/([^e])-/gi,Ht=/[MLHVCSQTAZ]/gi,Vt=/[MLHVCSQTAZ]/i,Gt=/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,Wt=/\./g;ot("Dom",{classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(Yt)},hasClass:function(t){return-1!==this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter((function(e){return e!==t})).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)}}),ot("Dom",{css:function(t,e){const n={};if(0===arguments.length)return this.node.style.cssText.split(/\s*;\s*/).filter((function(t){return!!t.length})).forEach((function(t){const e=t.split(/\s*:\s*/);n[e[0]]=e[1]})),n;if(arguments.length<2){if(Array.isArray(t)){for(const e of t){const t=ct(e);n[t]=this.node.style[t]}return n}if("string"==typeof t)return this.node.style[ct(t)];if("object"==typeof t)for(const e in t)this.node.style[ct(e)]=null==t[e]||qt.test(t[e])?"":t[e]}return 2===arguments.length&&(this.node.style[ct(t)]=null==e||qt.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return"none"!==this.css("display")}}),ot("Dom",{data:function(t,e,n){if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===n||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),ot("Dom",{remember:function(t,e){if("object"==typeof arguments[0])for(var n in t)this.remember(n,t[n]);else{if(1===arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0===arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory=this._memory||{}}});let Ut=0;const Qt={};function Zt(t){let e=t.getEventHolder();return e===vt.window&&(e=Qt),e.events||(e.events={}),e.events}function Jt(t){return t.getEventTarget()}function Kt(t,e,n,r,i){var s=n.bind(r||t),o=Mt(t),a=Zt(o),h=Jt(o);e=Array.isArray(e)?e:e.split(Yt),n._svgjsListenerId||(n._svgjsListenerId=++Ut),e.forEach((function(t){var e=t.split(".")[0],r=t.split(".")[1]||"*";a[e]=a[e]||{},a[e][r]=a[e][r]||{},a[e][r][n._svgjsListenerId]=s,h.addEventListener(e,s,i||!1)}))}function te(t,e,n,r){var i=Mt(t),s=Zt(i),o=Jt(i);("function"!=typeof n||(n=n._svgjsListenerId))&&(e=Array.isArray(e)?e:(e||"").split(Yt)).forEach((function(t){var e,a,h=t&&t.split(".")[0],u=t&&t.split(".")[1];if(n)s[h]&&s[h][u||"*"]&&(o.removeEventListener(h,s[h][u||"*"][n],r||!1),delete s[h][u||"*"][n]);else if(h&&u){if(s[h]&&s[h][u]){for(a in s[h][u])te(o,[h,u].join("."),a);delete s[h][u]}}else if(u)for(t in s)for(e in s[t])u===e&&te(o,[t,u].join("."));else if(h){if(s[h]){for(e in s[h])te(o,[h,e].join("."));delete s[h]}}else{for(t in s)te(o,t);!function(t){const e=t.getEventHolder();e.events&&(e.events={})}(i)}}))}function ee(t){const e=Math.round(t),n=Math.max(0,Math.min(255,e)).toString(16);return 1===n.length?"0"+n:n}function ne(t,e){for(let n=e.length;n--;)if(null==t[e[n]])return!1;return!0}function re(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}class ie{constructor(...t){this.init(...t)}init(t=0,e=0,n=0,r=0,i="rgb"){if(t=t||0,this.space)for(const t in this.space)delete this[this.space[t]];if("number"==typeof t)i="string"==typeof r?r:i,r="string"==typeof r?0:r,Object.assign(this,{_a:t,_b:e,_c:n,_d:r,space:i});else if(t instanceof Array)this.space=e||("string"==typeof t[3]?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){const n=function(t,e){const n=ne(t,"rgb")?{_a:t.r,_b:t.g,_c:t.b,space:"rgb"}:ne(t,"xyz")?{_a:t.x,_b:t.y,_c:t.z,_d:0,space:"xyz"}:ne(t,"hsl")?{_a:t.h,_b:t.s,_c:t.l,_d:0,space:"hsl"}:ne(t,"lab")?{_a:t.l,_b:t.a,_c:t.b,_d:0,space:"lab"}:ne(t,"lch")?{_a:t.l,_b:t.c,_c:t.h,_d:0,space:"lch"}:ne(t,"cmyk")?{_a:t.c,_b:t.m,_c:t.y,_d:t.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return n.space=e||n.space,n}(t,e);Object.assign(this,n)}else if("string"==typeof t)if(Rt.test(t)){const e=t.replace(Pt,""),[n,r,i]=Lt.exec(e).slice(1,4).map(t=>parseInt(t));Object.assign(this,{_a:n,_b:r,_c:i,_d:0,space:"rgb"})}else{if(!It.test(t))throw Error("Unsupported string format, can't construct Color");{const e=t=>parseInt(t,16),[,n,r,i]=Dt.exec(function(t){return 4===t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}(t)).map(e);Object.assign(this,{_a:n,_b:r,_c:i,_d:0,space:"rgb"})}}const{_a:s,_b:o,_c:a,_d:h}=this,u="rgb"===this.space?{r:s,g:o,b:a}:"xyz"===this.space?{x:s,y:o,z:a}:"hsl"===this.space?{h:s,s:o,l:a}:"lab"===this.space?{l:s,a:o,b:a}:"lch"===this.space?{l:s,c:o,h:a}:"cmyk"===this.space?{c:s,m:o,y:a,k:h}:{};Object.assign(this,u)}rgb(){if("rgb"===this.space)return this;if("lab"===(t=this.space)||"xyz"===t||"lch"===t){let{x:t,y:e,z:n}=this;if("lab"===this.space||"lch"===this.space){let{l:r,a:i,b:s}=this;if("lch"===this.space){const{c:t,h:e}=this,n=Math.PI/180;i=t*Math.cos(n*e),s=t*Math.sin(n*e)}const o=(r+16)/116,a=i/500+o,h=o-s/200,u=16/116,l=.008856,c=7.787;t=.95047*(a**3>l?a**3:(a-u)/c),e=1*(o**3>l?o**3:(o-u)/c),n=1.08883*(h**3>l?h**3:(h-u)/c)}const r=3.2406*t+-1.5372*e+-.4986*n,i=-.9689*t+1.8758*e+.0415*n,s=.0557*t+-.204*e+1.057*n,o=Math.pow,a=.0031308,h=r>a?1.055*o(r,1/2.4)-.055:12.92*r,u=i>a?1.055*o(i,1/2.4)-.055:12.92*i,l=s>a?1.055*o(s,1/2.4)-.055:12.92*s;return new ie(255*h,255*u,255*l)}if("hsl"===this.space){let{h:t,s:e,l:n}=this;if(t/=360,e/=100,n/=100,0===e){return n*=255,new ie(n,n,n)}const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=255*re(i,r,t+1/3),o=255*re(i,r,t),a=255*re(i,r,t-1/3);return new ie(s,o,a)}if("cmyk"===this.space){const{c:t,m:e,y:n,k:r}=this,i=255*(1-Math.min(1,t*(1-r)+r)),s=255*(1-Math.min(1,e*(1-r)+r)),o=255*(1-Math.min(1,n*(1-r)+r));return new ie(i,s,o)}return this;var t}lab(){const{x:t,y:e,z:n}=this.xyz();return new ie(116*e-16,500*(t-e),200*(e-n),"lab")}xyz(){const{_a:t,_b:e,_c:n}=this.rgb(),[r,i,s]=[t,e,n].map(t=>t/255),o=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,a=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,h=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,u=(.4124*o+.3576*a+.1805*h)/.95047,l=(.2126*o+.7152*a+.0722*h)/1,c=(.0193*o+.1192*a+.9505*h)/1.08883,f=u>.008856?Math.pow(u,1/3):7.787*u+16/116,d=l>.008856?Math.pow(l,1/3):7.787*l+16/116,p=c>.008856?Math.pow(c,1/3):7.787*c+16/116;return new ie(f,d,p,"xyz")}lch(){const{l:t,a:e,b:n}=this.lab(),r=Math.sqrt(e**2+n**2);let i=180*Math.atan2(n,e)/Math.PI;return i<0&&(i*=-1,i=360-i),new ie(t,r,i,"lch")}hsl(){const{_a:t,_b:e,_c:n}=this.rgb(),[r,i,s]=[t,e,n].map(t=>t/255),o=Math.max(r,i,s),a=Math.min(r,i,s),h=(o+a)/2,u=o===a,l=o-a;return new ie(360*(u?0:o===r?((i-s)/l+(i<s?6:0))/6:o===i?((s-r)/l+2)/6:o===s?((r-i)/l+4)/6:0),100*(u?0:h>.5?l/(2-o-a):l/(o+a)),100*h,"hsl")}cmyk(){const{_a:t,_b:e,_c:n}=this.rgb(),[r,i,s]=[t,e,n].map(t=>t/255),o=Math.min(1-r,1-i,1-s);return 1===o?new ie(0,0,0,1,"cmyk"):new ie((1-r-o)/(1-o),(1-i-o)/(1-o),(1-s-o)/(1-o),o,"cmyk")}_clamped(){const{_a:t,_b:e,_c:n}=this.rgb(),{max:r,min:i,round:s}=Math;return[t,e,n].map(t=>r(0,i(s(t),255)))}toHex(){const[t,e,n]=this._clamped().map(ee);return`#${t}${e}${n}`}toString(){return this.toHex()}toRgb(){const[t,e,n]=this._clamped();return`rgb(${t},${e},${n})`}toArray(){const{_a:t,_b:e,_c:n,_d:r,space:i}=this;return[t,e,n,r,i]}static random(t="vibrant",e,n){const{random:r,round:i,sin:s,PI:o}=Math;if("vibrant"===t){const t=24*r()+57,e=38*r()+45,n=360*r();return new ie(t,e,n,"lch")}if("sine"===t){const t=i(80*s(2*o*(e=null==e?r():e)/.5+.01)+150),n=i(50*s(2*o*e/.5+4.6)+200),a=i(100*s(2*o*e/.5+2.3)+150);return new ie(t,n,a)}if("pastel"===t){const t=8*r()+86,e=17*r()+9,n=360*r();return new ie(t,e,n,"lch")}if("dark"===t){const t=10+10*r(),e=50*r()+86,n=360*r();return new ie(t,e,n,"lch")}if("rgb"===t){const t=255*r(),e=255*r(),n=255*r();return new ie(t,e,n)}if("lab"===t){const t=100*r(),e=256*r()-128,n=256*r()-128;return new ie(t,e,n,"lab")}if("grey"===t){const t=255*r();return new ie(t,t,t)}}static test(t){return"string"==typeof t&&(It.test(t)||Rt.test(t))}static isRgb(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b}static isColor(t){return t&&(t instanceof ie||this.isRgb(t)||this.test(t))}}class se{constructor(...t){this.init(...t)}init(t,e){const n=0,r=0,i=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:{x:t,y:e};return this.x=null==i.x?n:i.x,this.y=null==i.y?r:i.y,this}clone(){return new se(this)}transform(t){return this.clone().transformO(t)}transformO(t){ae.isMatrixLike(t)||(t=new ae(t));const{x:e,y:n}=this;return this.x=t.a*e+t.c*n+t.e,this.y=t.b*e+t.d*n+t.f,this}toArray(){return[this.x,this.y]}}function oe(t,e,n){return Math.abs(e-t)<(n||1e-6)}class ae{constructor(...t){this.init(...t)}init(t){var e=ae.fromArray([1,0,0,1,0,0]);return t=t instanceof Ce?t.matrixify():"string"==typeof t?ae.fromArray(t.split(Yt).map(parseFloat)):Array.isArray(t)?ae.fromArray(t):"object"==typeof t&&ae.isMatrixLike(t)?t:"object"==typeof t?(new ae).transform(t):6===arguments.length?ae.fromArray([].slice.call(arguments)):e,this.a=null!=t.a?t.a:e.a,this.b=null!=t.b?t.b:e.b,this.c=null!=t.c?t.c:e.c,this.d=null!=t.d?t.d:e.d,this.e=null!=t.e?t.e:e.e,this.f=null!=t.f?t.f:e.f,this}clone(){return new ae(this)}transform(t){if(ae.isMatrixLike(t))return new ae(t).multiplyO(this);var e=ae.formatTransforms(t);const{x:n,y:r}=new se(e.ox,e.oy).transform(this);var i=(new ae).translateO(e.rx,e.ry).lmultiplyO(this).translateO(-n,-r).scaleO(e.scaleX,e.scaleY).skewO(e.skewX,e.skewY).shearO(e.shear).rotateO(e.theta).translateO(n,r);if(isFinite(e.px)||isFinite(e.py)){const t=new se(n,r).transform(i),s=e.px?e.px-t.x:0,o=e.py?e.py-t.y:0;i.translateO(s,o)}return i.translateO(e.tx,e.ty),i}compose(t){t.origin&&(t.originX=t.origin[0],t.originY=t.origin[1]);var e=t.originX||0,n=t.originY||0,r=t.scaleX||1,i=t.scaleY||1,s=t.shear||0,o=t.rotate||0,a=t.translateX||0,h=t.translateY||0;return(new ae).translateO(-e,-n).scaleO(r,i).shearO(s).rotateO(o).translateO(a,h).lmultiplyO(this).translateO(e,n)}decompose(t=0,e=0){var n=this.a,r=this.b,i=this.c,s=this.d,o=this.e,a=this.f,h=n*s-r*i,u=h>0?1:-1,l=u*Math.sqrt(n*n+r*r),c=Math.atan2(u*r,u*n),f=180/Math.PI*c,d=Math.cos(c),p=Math.sin(c),m=(n*i+r*s)/h,g=i*l/(m*n-r)||s*l/(m*r+n);return{scaleX:l,scaleY:g,shear:m,rotate:f,translateX:o-t+t*d*l+e*(m*d*l-p*g),translateY:a-e+t*p*l+e*(m*p*l+d*g),originX:t,originY:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}multiply(t){return this.clone().multiplyO(t)}multiplyO(t){var e=t instanceof ae?t:new ae(t);return ae.matrixMultiply(this,e,this)}lmultiply(t){return this.clone().lmultiplyO(t)}lmultiplyO(t){var e=t instanceof ae?t:new ae(t);return ae.matrixMultiply(e,this,this)}inverseO(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.e,s=this.f,o=t*r-e*n;if(!o)throw new Error("Cannot invert "+this);var a=r/o,h=-e/o,u=-n/o,l=t/o,c=-(a*i+u*s),f=-(h*i+l*s);return this.a=a,this.b=h,this.c=u,this.d=l,this.e=c,this.f=f,this}inverse(){return this.clone().inverseO()}translate(t,e){return this.clone().translateO(t,e)}translateO(t,e){return this.e+=t||0,this.f+=e||0,this}scale(t,e,n,r){return this.clone().scaleO(...arguments)}scaleO(t,e=t,n=0,r=0){3===arguments.length&&(r=n,n=e,e=t);const{a:i,b:s,c:o,d:a,e:h,f:u}=this;return this.a=i*t,this.b=s*e,this.c=o*t,this.d=a*e,this.e=h*t-n*t+n,this.f=u*e-r*e+r,this}rotate(t,e,n){return this.clone().rotateO(t,e,n)}rotateO(t,e=0,n=0){t=lt(t);const r=Math.cos(t),i=Math.sin(t),{a:s,b:o,c:a,d:h,e:u,f:l}=this;return this.a=s*r-o*i,this.b=o*r+s*i,this.c=a*r-h*i,this.d=h*r+a*i,this.e=u*r-l*i+n*i-e*r+e,this.f=l*r+u*i-e*i-n*r+n,this}flip(t,e){return this.clone().flipO(t,e)}flipO(t,e){return"x"===t?this.scaleO(-1,1,e,0):"y"===t?this.scaleO(1,-1,0,e):this.scaleO(-1,-1,t,e||t)}shear(t,e,n){return this.clone().shearO(t,e,n)}shearO(t,e=0,n=0){const{a:r,b:i,c:s,d:o,e:a,f:h}=this;return this.a=r+i*t,this.c=s+o*t,this.e=a+h*t-n*t,this}skew(t,e,n,r){return this.clone().skewO(...arguments)}skewO(t,e=t,n=0,r=0){3===arguments.length&&(r=n,n=e,e=t),t=lt(t),e=lt(e);const i=Math.tan(t),s=Math.tan(e),{a:o,b:a,c:h,d:u,e:l,f:c}=this;return this.a=o+a*i,this.b=a+o*s,this.c=h+u*i,this.d=u+h*s,this.e=l+c*i-r*i,this.f=c+l*s-n*s,this}skewX(t,e,n){return this.skew(t,0,e,n)}skewXO(t,e,n){return this.skewO(t,0,e,n)}skewY(t,e,n){return this.skew(0,t,e,n)}skewYO(t,e,n){return this.skewO(0,t,e,n)}aroundO(t,e,n){var r=t||0,i=e||0;return this.translateO(-r,-i).lmultiplyO(n).translateO(r,i)}around(t,e,n){return this.clone().aroundO(t,e,n)}equals(t){var e=new ae(t);return oe(this.a,e.a)&&oe(this.b,e.b)&&oe(this.c,e.c)&&oe(this.d,e.d)&&oe(this.e,e.e)&&oe(this.f,e.f)}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}static fromArray(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}static isMatrixLike(t){return null!=t.a||null!=t.b||null!=t.c||null!=t.d||null!=t.e||null!=t.f}static formatTransforms(t){var e="both"===t.flip||!0===t.flip,n=t.flip&&(e||"x"===t.flip)?-1:1,r=t.flip&&(e||"y"===t.flip)?-1:1,i=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,s=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,o=t.scale&&t.scale.length?t.scale[0]*n:isFinite(t.scale)?t.scale*n:isFinite(t.scaleX)?t.scaleX*n:n,a=t.scale&&t.scale.length?t.scale[1]*r:isFinite(t.scale)?t.scale*r:isFinite(t.scaleY)?t.scaleY*r:r,h=t.shear||0,u=t.rotate||t.theta||0,l=new se(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),c=l.x,f=l.y,d=new se(t.position||t.px||t.positionX,t.py||t.positionY),p=d.x,m=d.y,g=new se(t.translate||t.tx||t.translateX,t.ty||t.translateY),y=g.x,v=g.y,w=new se(t.relative||t.rx||t.relativeX,t.ry||t.relativeY);return{scaleX:o,scaleY:a,skewX:i,skewY:s,shear:h,theta:u,rx:w.x,ry:w.y,tx:y,ty:v,ox:c,oy:f,px:p,py:m}}static matrixMultiply(t,e,n){var r=t.a*e.a+t.c*e.b,i=t.b*e.a+t.d*e.b,s=t.a*e.c+t.c*e.d,o=t.b*e.c+t.d*e.d,a=t.e+t.a*e.e+t.c*e.f,h=t.f+t.b*e.e+t.d*e.f;return n.a=r,n.b=i,n.c=s,n.d=o,n.e=a,n.f=h,n}}function he(){if(!he.nodes){const t=Mt().size(2,0);t.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),t.attr("focusable","false"),t.attr("aria-hidden","true");const e=t.path().node;he.nodes={svg:t,path:e}}if(!he.nodes.svg.node.parentNode){const t=vt.document.body||vt.document.documentElement;he.nodes.svg.addTo(t)}return he.nodes}function ue(t){return!(t.width||t.height||t.x||t.y)}At(ae,"Matrix");class le{constructor(...t){this.init(...t)}init(t){return t="string"==typeof t?t.split(Yt).map(parseFloat):Array.isArray(t)?t:"object"==typeof t?[null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height]:4===arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}merge(t){const e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x+t.width)-e,i=Math.max(this.y+this.height,t.y+t.height)-n;return new le(e,n,r,i)}transform(t){t instanceof ae||(t=new ae(t));let e=1/0,n=-1/0,r=1/0,i=-1/0;return[new se(this.x,this.y),new se(this.x2,this.y),new se(this.x,this.y2),new se(this.x2,this.y2)].forEach((function(s){s=s.transform(t),e=Math.min(e,s.x),n=Math.max(n,s.x),r=Math.min(r,s.y),i=Math.max(i,s.y)})),new le(e,r,n-e,i-r)}addOffset(){return this.x+=vt.window.pageXOffset,this.y+=vt.window.pageYOffset,this}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}toArray(){return[this.x,this.y,this.width,this.height]}isNulled(){return ue(this)}}function ce(t,e){let n;try{if(n=t(this.node),ue(n)&&((r=this.node)!==vt.document&&!(vt.document.documentElement.contains||function(t){for(;t.parentNode;)t=t.parentNode;return t===vt.document}).call(vt.document.documentElement,r)))throw new Error("Element not in the dom")}catch(t){n=e(this)}var r;return n}ot({viewbox:{viewbox(t,e,n,r){return null==t?new le(this.attr("viewBox")):this.attr("viewBox",new le(t,e,n,r))},zoom(t,e){let n=this.node.clientWidth,r=this.node.clientHeight;const i=this.viewbox();if(!n&&!r){var s=window.getComputedStyle(this.node);n=parseFloat(s.getPropertyValue("width")),r=parseFloat(s.getPropertyValue("height"))}const o=n/i.width,a=r/i.height,h=Math.min(o,a);if(null==t)return h;let u=h/t;u===1/0&&(u=Number.MIN_VALUE),e=e||new se(n/2/o+i.x,r/2/a+i.y);const l=new le(i).transform(new ae({scale:u,origin:e}));return this.viewbox(l)}}}),At(le,"Box");const fe=function(){try{return Function("name","baseClass","_constructor",["baseClass = baseClass || Array","return {","  [name]: class extends baseClass {","    constructor (...args) {","      super(...args)","      _constructor && _constructor.apply(this, args)","    }","  }","}[name]"].join("\n"))}catch(t){return(t,e=Array,n)=>{const r=function(){e.apply(this,arguments),n&&n.apply(this,arguments)};return(r.prototype=Object.create(e.prototype)).constructor=r,r.prototype.map=function(t){const e=new r;return e.push.apply(e,Array.prototype.map.call(this,t)),e},r}}}(),de=fe("List",Array,(function(t=[]){if("number"==typeof t)return this;this.length=0,this.push(...t)}));Et(de,{each(t,...e){return"function"==typeof t?this.map(e=>t.call(e,e)):this.map(n=>n[t](...e))},toArray(){return Array.prototype.concat.apply([],this)}});const pe=["toArray","constructor","each"];function me(t,e){return new de(ut((e||vt.document).querySelectorAll(t),(function(t){return kt(t)})))}de.extend=function(t){t=t.reduce((t,e)=>(pe.includes(e)||"_"===e[0]||(t[e]=function(...t){return this.each(e,...t)}),t),{}),Et(de,t)};class ge extends wt{constructor({events:t={}}={}){super(),this.events=t}addEventListener(){}dispatch(t,e){return function(t,e,n){var r=Jt(t);return e instanceof vt.window.Event||(e=new vt.window.CustomEvent(e,{detail:n,cancelable:!0})),r.dispatchEvent(e),e}(this,t,e)}dispatchEvent(t){const e=this.getEventHolder().events;if(!e)return!0;const n=e[t.type];for(const e in n)for(const r in n[e])n[e][r](t);return!t.defaultPrevented}fire(t,e){return this.dispatch(t,e),this}getEventHolder(){return this}getEventTarget(){return this}off(t,e){return te(this,t,e),this}on(t,e,n,r){return Kt(this,t,e,n,r),this}removeEventListener(){}}function ye(){}At(ge,"EventTarget");const ve=400,we=">",_e=0,xe={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"},be=fe("SVGArray",Array,(function(t){this.init(t)}));Et(be,{init(t){return"number"==typeof t||(this.length=0,this.push(...this.parse(t))),this},toArray(){return Array.prototype.concat.apply([],this)},toString(){return this.join(" ")},valueOf(){const t=[];return t.push(...this),t},parse:(t=[])=>t instanceof Array?t:t.trim().split(Yt).map(parseFloat),clone(){return new this.constructor(this)},toSet(){return new Set(this)}});class Me{constructor(...t){this.init(...t)}init(t,e){return e=Array.isArray(t)?t[1]:e,t=Array.isArray(t)?t[0]:t,this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(jt))&&(this.value=parseFloat(e[1]),"%"===e[5]?this.value/=100:"s"===e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof Me&&(this.value=t.valueOf(),this.unit=t.unit),this}toString(){return("%"===this.unit?~~(1e8*this.value)/1e6:"s"===this.unit?this.value/1e3:this.value)+this.unit}toJSON(){return this.toString()}toArray(){return[this.value,this.unit]}valueOf(){return this.value}plus(t){return t=new Me(t),new Me(this+t,this.unit||t.unit)}minus(t){return t=new Me(t),new Me(this-t,this.unit||t.unit)}times(t){return t=new Me(t),new Me(this*t,this.unit||t.unit)}divide(t){return t=new Me(t),new Me(this/t,this.unit||t.unit)}convert(t){return new Me(this.value,t)}}const Oe=[];class ke extends ge{constructor(t,e){super(t),this.node=t,this.type=t.nodeName,e&&t!==e&&this.attr(e)}add(t,e){return t=Mt(t),null==e?this.node.appendChild(t.node):t.node!==this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this}addTo(t){return Mt(t).put(this)}children(){return new de(ut(this.node.children,(function(t){return kt(t)})))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(){return this.writeDataToDom(),function t(e){for(var n=e.children.length-1;n>=0;n--)t(e.children[n]);return e.id?kt(e).id(St(e.nodeName)):kt(e)}(this.node.cloneNode(!0))}each(t,e){var n,r,i=this.children();for(n=0,r=i.length;n<r;n++)t.apply(i[n],[n,i]),e&&i[n].each(t,e);return this}element(t){return this.put(new ke(bt(t)))}first(){return kt(this.node.firstChild)}get(t){return kt(this.node.childNodes[t])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(t){return this.index(t)>=0}id(t){return void 0!==t||this.node.id||(this.node.id=St(this.type)),this.attr("id",t)}index(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}last(){return kt(this.node.lastChild)}matches(t){const e=this.node;return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}parent(t){var e=this;if(!e.node.parentNode)return null;if(e=kt(e.node.parentNode),!t)return e;for(;e;){if("string"==typeof t?e.matches(t):e instanceof t)return e;if(!e.node.parentNode||"#document"===e.node.parentNode.nodeName||"#document-fragment"===e.node.parentNode.nodeName)return null;e=kt(e.node.parentNode)}}put(t,e){return this.add(t,e),t}putIn(t){return Mt(t).add(this)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(t){return this.node.removeChild(t.node),this}replace(t){return t=Mt(t),this.node.parentNode.replaceChild(t.node,this.node),t}round(t=2,e){const n=10**t,r=this.attr();e||(e=Object.keys(r));const i={};return e.forEach(t=>{i[t]=Math.round(r[t]*n)/n}),this.attr(i),this}toString(){return this.id()}svg(t,e){var n,r,i;if(!1===t&&(e=!1,t=null),null==t||"function"==typeof t){e=null==e||e,this.writeDataToDom();let n=this;if(null!=t){if(n=kt(n.node.cloneNode(!0)),e){const e=t(n);if(n=e||n,!1===e)return""}n.each((function(){const e=t(this),n=e||this;!1===e?this.remove():e&&this!==n&&this.replace(n)}),!0)}return e?n.node.outerHTML:n.node.innerHTML}for(e=null!=e&&e,n=vt.document.createElementNS(mt,"svg"),i=vt.document.createDocumentFragment(),n.innerHTML=t,r=n.children.length;r--;)i.appendChild(n.firstElementChild);const s=this.parent();return e?this.replace(i)&&s:this.add(i)}words(t){return this.node.textContent=t,this}writeDataToDom(){return this.each((function(){this.writeDataToDom()})),this}}Et(ke,{attr:function(t,e,n){if(null==t){t={},e=this.node.attributes;for(const n of e)t[n.nodeName]=Bt.test(n.nodeValue)?parseFloat(n.nodeValue):n.nodeValue;return t}if(t instanceof Array)return t.reduce((t,e)=>(t[e]=this.attr(e),t),{});if("object"==typeof t&&t.constructor===Object)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?xe[t]:Bt.test(e)?parseFloat(e):e;"number"==typeof(e=Oe.reduce((e,n)=>n(t,e,this),e))?e=new Me(e):ie.isColor(e)?e=new ie(e):e.constructor===Array&&(e=new be(e)),"leading"===t?this.leading&&this.leading(e):"string"==typeof n?this.node.setAttributeNS(n,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!==t&&"x"!==t||this.rebuild()}return this},find:function(t){return me(t,this.node)},findOne:function(t){return kt(this.node.querySelector(t))}}),At(ke,"Dom");class Ce extends ke{constructor(t,e){super(t,e),this.dom={},this.node.instance=this,t.hasAttribute("svgjs:data")&&this.setData(JSON.parse(t.getAttribute("svgjs:data"))||{})}center(t,e){return this.cx(t).cy(e)}cx(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)}cy(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)}defs(){return this.root().defs()}dmove(t,e){return this.dx(t).dy(e)}dx(t=0){return this.x(new Me(t).plus(this.x()))}dy(t=0){return this.y(new Me(t).plus(this.y()))}root(){const t=this.parent(_t[xt]);return t&&t.root()}getEventHolder(){return this}height(t){return this.attr("height",t)}inside(t,e){const n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height}move(t,e){return this.x(t).y(e)}parents(t=vt.document){t=Mt(t);const e=new de;let n=this;for(;(n=n.parent())&&n.node!==t.node&&n.node!==vt.document;)e.push(n);return e}reference(t){if(!(t=this.attr(t)))return null;const e=t.match(Ft);return e?Mt(e[1]):null}setData(t){return this.dom=t,this}size(t,e){const n=dt(this,t,e);return this.width(new Me(n.width)).height(new Me(n.height))}width(t){return this.attr("width",t)}writeDataToDom(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),super.writeDataToDom()}x(t){return this.attr("x",t)}y(t){return this.attr("y",t)}}Et(Ce,{bbox:function(){return new le(ce.call(this,t=>t.getBBox(),t=>{try{const e=t.clone().addTo(he().svg).show(),n=e.node.getBBox();return e.remove(),n}catch(e){throw new Error('Getting bbox of element "'+t.node.nodeName+'" is not possible. '+e.toString())}}))},rbox:function(t){const e=new le(ce.call(this,t=>t.getBoundingClientRect(),t=>{throw new Error('Getting rbox of element "'+t.node.nodeName+'" is not possible')}));return t?e.transform(t.screenCTM().inverse()):e.addOffset()},point:function(t,e){return new se(t,e).transform(this.screenCTM().inverse())},ctm:function(){return new ae(this.node.getCTM())},screenCTM:function(){if("function"==typeof this.isRoot&&!this.isRoot()){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new ae(e)}return new ae(this.node.getScreenCTM())}}),At(Ce,"Element");var Ae={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"===e?t:t+"-"+e}};function Te(t){return this.attr("rx",t)}function Se(t){return this.attr("ry",t)}function Ee(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())}function Ne(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())}function je(t){return null==t?this.attr("cx"):this.attr("cx",t)}function De(t){return null==t?this.attr("cy"):this.attr("cy",t)}function Le(t){return null==t?2*this.rx():this.rx(new Me(t).divide(2))}function Fe(t){return null==t?2*this.ry():this.ry(new Me(t).divide(2))}["fill","stroke"].forEach((function(t){var e,n={};n[t]=function(n){if(void 0===n)return this.attr(t);if("string"==typeof n||n instanceof ie||ie.isRgb(n)||n instanceof Ce)this.attr(t,n);else for(e=Ae[t].length-1;e>=0;e--)null!=n[Ae[t][e]]&&this.attr(Ae.prefix(t,Ae[t][e]),n[Ae[t][e]]);return this},ot(["Element","Runner"],n)})),ot(["Element","Runner"],{matrix:function(t,e,n,r,i,s){return null==t?new ae(this):this.attr("transform",new ae(t,e,n,r,i,s))},rotate:function(t,e,n){return this.transform({rotate:t,ox:e,oy:n},!0)},skew:function(t,e,n,r){return 1===arguments.length||3===arguments.length?this.transform({skew:t,ox:e,oy:n},!0):this.transform({skew:[t,e],ox:n,oy:r},!0)},shear:function(t,e,n){return this.transform({shear:t,ox:e,oy:n},!0)},scale:function(t,e,n,r){return 1===arguments.length||3===arguments.length?this.transform({scale:t,ox:e,oy:n},!0):this.transform({scale:[t,e],ox:n,oy:r},!0)},translate:function(t,e){return this.transform({translate:[t,e]},!0)},relative:function(t,e){return this.transform({relative:[t,e]},!0)},flip:function(t,e){var n="string"==typeof t?t:(isFinite(t),"both"),r="both"===t&&isFinite(e)?[e,e]:"x"===t?[e,0]:"y"===t?[0,e]:isFinite(t)?[t,t]:[0,0];return this.transform({flip:n,origin:r},!0)},opacity:function(t){return this.attr("opacity",t)}}),ot("radius",{radius:function(t,e){var n=(this._element||this).type;return"radialGradient"===n||"radialGradient"===n?this.attr("r",new Me(t)):this.rx(t).ry(null==e?t:e)}}),ot("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(t){return new se(this.node.getPointAtLength(t))}}),ot(["Element","Runner"],{font:function(t,e){if("object"==typeof t){for(e in t)this.font(e,t[e]);return this}return"leading"===t?this.leading(e):"anchor"===t?this.attr("text-anchor",e):"size"===t||"family"===t||"weight"===t||"stretch"===t||"variant"===t||"style"===t?this.attr("font-"+t,e):this.attr(t,e)}}),ot("Text",{ax(t){return this.attr("x",t)},ay(t){return this.attr("y",t)},amove(t,e){return this.ax(t).ay(e)}}),ot("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce((function(t,e){return t[e]=function(t){return null===t?te(this,e):Kt(this,e,t),this},t}),{})),ot("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(zt).slice(0,-1).map((function(t){var e=t.trim().split("(");return[e[0],e[1].split(Yt).map((function(t){return parseFloat(t)}))]})).reverse().reduce((function(t,e){return"matrix"===e[0]?t.lmultiply(ae.fromArray(e[1])):t[e[0]].apply(t,e[1])}),new ae)},toParent:function(t){if(this===t)return this;var e=this.screenCTM(),n=t.screenCTM().inverse();return this.addTo(t).untransform().transform(n.multiply(e)),this},toRoot:function(){return this.toParent(this.root())},transform:function(t,e){if(null==t||"string"==typeof t){var n=new ae(this).decompose();return null==t?n:n[t]}ae.isMatrixLike(t)||(t={...t,origin:pt(t,this)});var r=new ae(!0===e?this:e||!1).transform(t);return this.attr("transform",r)}});var ze=Object.freeze({__proto__:null,rx:Te,ry:Se,x:Ee,y:Ne,cx:je,cy:De,width:Le,height:Fe});class Pe extends Ce{}At(Pe,"Shape");class Ie extends Pe{constructor(t){super(Ot("circle",t),t)}radius(t){return this.attr("r",t)}rx(t){return this.attr("r",t)}ry(t){return this.rx(t)}size(t){return this.radius(new Me(t).divide(2))}}Et(Ie,{x:Ee,y:Ne,cx:je,cy:De,width:Le,height:Fe}),ot({Container:{circle:Nt((function(t){return this.put(new Ie).size(t).move(0,0)}))}}),At(Ie,"Circle");class Re extends Ce{flatten(t){return this.each((function(){return this instanceof Re?this.flatten(t).ungroup(t):this.toParent(t)})),this.node.firstElementChild||this.remove(),this}ungroup(t){return t=t||this.parent(),this.each((function(){return this.toParent(t)})),this.remove(),this}}At(Re,"Container");class qe extends Re{constructor(t){super(Ot("defs",t),t)}flatten(){return this}ungroup(){return this}}At(qe,"Defs");class Be extends Pe{constructor(t){super(Ot("ellipse",t),t)}size(t,e){var n=dt(this,t,e);return this.rx(new Me(n.width).divide(2)).ry(new Me(n.height).divide(2))}}Et(Be,ze),ot("Container",{ellipse:Nt((function(t=0,e=t){return this.put(new Be).size(t,e).move(0,0)}))}),At(Be,"Ellipse");class $e extends Ce{constructor(t){super(Ot("stop",t),t)}update(t){return("number"==typeof t||t instanceof Me)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new Me(t.offset)),this}}function Ye(t,e){return"radialGradient"===(this._element||this).type?this.attr({fx:new Me(t),fy:new Me(e)}):this.attr({x1:new Me(t),y1:new Me(e)})}function Xe(t,e){return"radialGradient"===(this._element||this).type?this.attr({cx:new Me(t),cy:new Me(e)}):this.attr({x2:new Me(t),y2:new Me(e)})}At($e,"Stop");var He,Ve=Object.freeze({__proto__:null,from:Ye,to:Xe});class Ge extends Re{constructor(t,e){super(Ot(t+"Gradient","string"==typeof t?null:t),e)}stop(t,e,n){return this.put(new $e).update(t,e,n)}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}url(){return"url(#"+this.id()+")"}toString(){return this.url()}attr(t,e,n){return"transform"===t&&(t="gradientTransform"),super.attr(t,e,n)}targets(){return me('svg [fill*="'+this.id()+'"]')}bbox(){return new le}}Et(Ge,Ve),ot({Container:{gradient:Nt((function(t,e){return this.defs().gradient(t,e)}))},Defs:{gradient:Nt((function(t,e){return this.put(new Ge(t)).update(e)}))}}),At(Ge,"Gradient");class We extends Re{constructor(t){super(Ot("pattern",t),t)}url(){return"url(#"+this.id()+")"}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}toString(){return this.url()}attr(t,e,n){return"transform"===t&&(t="patternTransform"),super.attr(t,e,n)}targets(){return me('svg [fill*="'+this.id()+'"]')}bbox(){return new le}}ot({Container:{pattern(...t){return this.defs().pattern(...t)}},Defs:{pattern:Nt((function(t,e,n){return this.put(new We).update(n).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}))}}),At(We,"Pattern");class Ue extends Pe{constructor(t){super(Ot("image",t),t)}load(t,e){if(!t)return this;var n=new vt.window.Image;return Kt(n,"load",(function(t){var r=this.parent(We);0===this.width()&&0===this.height()&&this.size(n.width,n.height),r instanceof We&&0===r.width()&&0===r.height()&&r.size(this.width(),this.height()),"function"==typeof e&&e.call(this,t)}),this),Kt(n,"load error",(function(){te(n)})),this.attr("href",n.src=t,yt)}}He=function(t,e,n){return"fill"!==t&&"stroke"!==t||$t.test(e)&&(e=n.root().defs().image(e)),e instanceof Ue&&(e=n.root().defs().pattern(0,0,t=>{t.add(e)})),e},Oe.push(He),ot({Container:{image:Nt((function(t,e){return this.put(new Ue).size(0,0).load(t,e)}))}}),At(Ue,"Image");const Qe=fe("PointArray",be);Et(Qe,{toString(){for(var t=0,e=this.length,n=[];t<e;t++)n.push(this[t].join(","));return n.join(" ")},toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}},at(t){if(!this.destination)return this;for(var e=0,n=this.length,r=[];e<n;e++)r.push([this[e][0]+(this.destination[e][0]-this[e][0])*t,this[e][1]+(this.destination[e][1]-this[e][1])*t]);return new Qe(r)},parse(t=[[0,0]]){var e=[];if(t instanceof Array){if(t[0]instanceof Array)return t}else t=t.trim().split(Yt).map(parseFloat);t.length%2!=0&&t.pop();for(var n=0,r=t.length;n<r;n+=2)e.push([t[n],t[n+1]]);return e},transform(t){const e=[];for(let n=0;n<this.length;n++){const r=this[n];e.push([t.a*r[0]+t.c*r[1]+t.e,t.b*r[0]+t.d*r[1]+t.f])}return new Qe(e)},move(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var r=this.length-1;r>=0;r--)this[r]=[this[r][0]+t,this[r][1]+e];return this},size(t,e){var n,r=this.bbox();for(n=this.length-1;n>=0;n--)r.width&&(this[n][0]=(this[n][0]-r.x)*t/r.width+r.x),r.height&&(this[n][1]=(this[n][1]-r.y)*e/r.height+r.y);return this},bbox(){var t=-1/0,e=-1/0,n=1/0,r=1/0;return this.forEach((function(i){t=Math.max(i[0],t),e=Math.max(i[1],e),n=Math.min(i[0],n),r=Math.min(i[1],r)})),{x:n,y:r,width:t-n,height:e-r}}});const Ze=Qe;var Je=Object.freeze({__proto__:null,MorphArray:Ze,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){const e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){const e=this.bbox();return null==t?e.height:this.size(e.width,t)}});class Ke extends Pe{constructor(t){super(Ot("line",t),t)}array(){return new Qe([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}plot(t,e,n,r){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:n,y2:r}:new Qe(t).toLine(),this.attr(t))}move(t,e){return this.attr(this.array().move(t,e).toLine())}size(t,e){var n=dt(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}}Et(Ke,Je),ot({Container:{line:Nt((function(...t){return Ke.prototype.plot.apply(this.put(new Ke),null!=t[0]?t:[0,0,0,0])}))}}),At(Ke,"Line");class tn extends Re{constructor(t){super(Ot("marker",t),t)}width(t){return this.attr("markerWidth",t)}height(t){return this.attr("markerHeight",t)}ref(t,e){return this.attr("refX",t).attr("refY",e)}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}toString(){return"url(#"+this.id()+")"}}function en(t,e){return function(n){return null==n?this[n]:(this[t]=n,e&&e.call(this),this)}}ot({Container:{marker(...t){return this.defs().marker(...t)}},Defs:{marker:Nt((function(t,e,n){return this.put(new tn).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(n)}))},marker:{marker(t,e,n,r){var i=["marker"];return"all"!==t&&i.push(t),i=i.join("-"),t=arguments[1]instanceof tn?arguments[1]:this.defs().marker(e,n,r),this.attr(i,t)}}}),At(tn,"Marker");const nn={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)},bezier:function(t,e,n,r){return function(i){return i<0?t>0?e/t*i:n>0?r/n*i:0:i>1?n<1?(1-r)/(1-n)*i+(r-n)/(1-n):t<1?(1-e)/(1-t)*i+(e-t)/(1-t):1:3*i*(1-i)**2*e+3*i**2*(1-i)*r+i**3}},steps:function(t,e="end"){e=e.split("-").reverse()[0];let n=t;return"none"===e?--n:"both"===e&&++n,(r,i=!1)=>{let s=Math.floor(r*t);const o=r*s%1==0;return"start"!==e&&"both"!==e||++s,i&&o&&--s,r>=0&&s<0&&(s=0),r<=1&&s>n&&(s=n),s/n}}};class rn{done(){return!1}}class sn extends rn{constructor(t){super(),this.ease=nn[t||we]||t}step(t,e,n){return"number"!=typeof t?n<1?t:e:t+(e-t)*this.ease(n)}}class on extends rn{constructor(t){super(),this.stepper=t}step(t,e,n,r){return this.stepper(t,e,n,r)}done(t){return t.done}}function an(){var t=(this._duration||500)/1e3,e=this._overshoot||0,n=Math.PI,r=Math.log(e/100+1e-10),i=-r/Math.sqrt(n*n+r*r),s=3.9/(i*t);this.d=2*i*s,this.k=s*s}Et(class extends on{constructor(t,e){super(),this.duration(t||500).overshoot(e||0)}step(t,e,n,r){if("string"==typeof t)return t;if(r.done=n===1/0,n===1/0)return e;if(0===n)return t;n>100&&(n=16),n/=1e3;var i=r.velocity||0,s=-this.d*i-this.k*(t-e),o=t+i*n+s*n*n/2;return r.velocity=i+s*n,r.done=Math.abs(e-o)+Math.abs(i)<.002,r.done?e:o}},{duration:en("_duration",an),overshoot:en("_overshoot",an)});Et(class extends on{constructor(t,e,n,r){super(),t=null==t?.1:t,e=null==e?.01:e,n=null==n?0:n,r=null==r?1e3:r,this.p(t).i(e).d(n).windup(r)}step(t,e,n,r){if("string"==typeof t)return t;if(r.done=n===1/0,n===1/0)return e;if(0===n)return t;var i=e-t,s=(r.integral||0)+i*n,o=(i-(r.error||0))/n,a=this.windup;return!1!==a&&(s=Math.max(-a,Math.min(s,a))),r.error=i,r.integral=s,r.done=Math.abs(i)<.001,r.done?e:t+(this.P*i+this.I*s+this.D*o)}},{windup:en("windup"),p:en("P"),i:en("I"),d:en("D")});const hn=fe("PathArray",be);function un(t,e,n,r){return n+r.replace(Wt," .")}const ln={M:function(t,e,n){return e.x=n.x=t[0],e.y=n.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,n){return e.x=n.x,e.y=n.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},cn="mlhvqtcsaz".split("");for(var fn=0,dn=cn.length;fn<dn;++fn)ln[cn[fn]]=function(t){return function(e,n,r){if("H"===t)e[0]=e[0]+n.x;else if("V"===t)e[0]=e[0]+n.y;else if("A"===t)e[5]=e[5]+n.x,e[6]=e[6]+n.y;else for(var i=0,s=e.length;i<s;++i)e[i]=e[i]+(i%2?n.y:n.x);return ln[t](e,n,r)}}(cn[fn].toUpperCase());Et(hn,{toString(){return function(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e][0],null!=t[e][1]&&(r+=t[e][1],null!=t[e][2]&&(r+=" ",r+=t[e][2],null!=t[e][3]&&(r+=" ",r+=t[e][3],r+=" ",r+=t[e][4],null!=t[e][5]&&(r+=" ",r+=t[e][5],r+=" ",r+=t[e][6],null!=t[e][7]&&(r+=" ",r+=t[e][7])))));return r+" "}(this)},move(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var r,i=this.length-1;i>=0;i--)"M"===(r=this[i][0])||"L"===r||"T"===r?(this[i][1]+=t,this[i][2]+=e):"H"===r?this[i][1]+=t:"V"===r?this[i][1]+=e:"C"===r||"S"===r||"Q"===r?(this[i][1]+=t,this[i][2]+=e,this[i][3]+=t,this[i][4]+=e,"C"===r&&(this[i][5]+=t,this[i][6]+=e)):"A"===r&&(this[i][6]+=t,this[i][7]+=e);return this},size(t,e){var n,r,i=this.bbox();for(i.width=0===i.width?1:i.width,i.height=0===i.height?1:i.height,n=this.length-1;n>=0;n--)"M"===(r=this[n][0])||"L"===r||"T"===r?(this[n][1]=(this[n][1]-i.x)*t/i.width+i.x,this[n][2]=(this[n][2]-i.y)*e/i.height+i.y):"H"===r?this[n][1]=(this[n][1]-i.x)*t/i.width+i.x:"V"===r?this[n][1]=(this[n][1]-i.y)*e/i.height+i.y:"C"===r||"S"===r||"Q"===r?(this[n][1]=(this[n][1]-i.x)*t/i.width+i.x,this[n][2]=(this[n][2]-i.y)*e/i.height+i.y,this[n][3]=(this[n][3]-i.x)*t/i.width+i.x,this[n][4]=(this[n][4]-i.y)*e/i.height+i.y,"C"===r&&(this[n][5]=(this[n][5]-i.x)*t/i.width+i.x,this[n][6]=(this[n][6]-i.y)*e/i.height+i.y)):"A"===r&&(this[n][1]=this[n][1]*t/i.width,this[n][2]=this[n][2]*e/i.height,this[n][6]=(this[n][6]-i.x)*t/i.width+i.x,this[n][7]=(this[n][7]-i.y)*e/i.height+i.y);return this},equalCommands(t){var e,n,r;for(t=new hn(t),r=this.length===t.length,e=0,n=this.length;r&&e<n;e++)r=this[e][0]===t[e][0];return r},morph(t){return t=new hn(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at(t){if(!this.destination)return this;var e,n,r,i,s=this.destination.value,o=[],a=new hn;for(e=0,n=this.length;e<n;e++){for(o[e]=[this[e][0]],r=1,i=this[e].length;r<i;r++)o[e][r]=this[e][r]+(s[e][r]-this[e][r])*t;"A"===o[e][0]&&(o[e][4]=+(0!==o[e][4]),o[e][5]=+(0!==o[e][5]))}return a.value=o,a},parse(t=[["M",0,0]]){if(t instanceof hn)return t;var e,n={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(Gt,un).replace(Ht," $& ").replace(Xt,"$1 -").trim().split(Yt):t.reduce((function(t,e){return[].concat.call(t,e)}),[]);var r=[],i=new se,s=new se,o=0,a=t.length;do{Vt.test(t[o])?(e=t[o],++o):"M"===e?e="L":"m"===e&&(e="l"),r.push(ln[e].call(null,t.slice(o,o+=n[e.toUpperCase()]).map(parseFloat),i,s))}while(a>o);return r},bbox(){return he().path.setAttribute("d",this.toString()),he.nodes.path.getBBox()}});class pn{constructor(t){this._stepper=t||new sn("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}from(t){return null==t?this._from:(this._from=this._set(t),this)}to(t){return null==t?this._to:(this._to=this._set(t),this)}type(t){return null==t?this._type:(this._type=t,this)}_set(t){if(!this._type){var e=typeof t;"number"===e?this.type(Me):"string"===e?ie.isColor(t)?this.type(ie):Yt.test(t)?this.type(Ht.test(t)?hn:be):jt.test(t)?this.type(Me):this.type(mn):vn.indexOf(t.constructor)>-1?this.type(t.constructor):Array.isArray(t)?this.type(be):"object"===e?this.type(yn):this.type(mn)}var n=new this._type(t);return this._type===ie&&(n=this._to?n[this._to[4]]():this._from?n[this._from[4]]():n),n=n.toArray(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(n.length)).map(Object).map((function(t){return t.done=!0,t})),n}stepper(t){return null==t?this._stepper:(this._stepper=t,this)}done(){return this._context.map(this._stepper.done).reduce((function(t,e){return t&&e}),!0)}at(t){var e=this;return this._morphObj.fromArray(this._from.map((function(n,r){return e._stepper.step(n,e._to[r],t,e._context[r],e._context)})))}}class mn{constructor(...t){this.init(...t)}init(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}valueOf(){return this.value}toArray(){return[this.value]}}class gn{constructor(...t){this.init(...t)}init(t){return Array.isArray(t)&&(t={scaleX:t[0],scaleY:t[1],shear:t[2],rotate:t[3],translateX:t[4],translateY:t[5],originX:t[6],originY:t[7]}),Object.assign(this,gn.defaults,t),this}toArray(){var t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}gn.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};class yn{constructor(...t){this.init(...t)}init(t){if(this.values=[],!Array.isArray(t)){t=t||{};var e=[];for(const n in t)e.push([n,t[n]]);return e.sort((t,e)=>t[0]-e[0]),this.values=e.reduce((t,e)=>t.concat(e),[]),this}this.values=t}valueOf(){for(var t={},e=this.values,n=0,r=e.length;n<r;n+=2)t[e[n]]=e[n+1];return t}toArray(){return this.values}}const vn=[mn,gn,yn];class wn extends Pe{constructor(t){super(Ot("path",t),t)}array(){return this._array||(this._array=new hn(this.attr("d")))}plot(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new hn(t))}clear(){return delete this._array,this}move(t,e){return this.attr("d",this.array().move(t,e))}x(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)}y(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)}size(t,e){var n=dt(this,t,e);return this.attr("d",this.array().size(n.width,n.height))}width(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)}height(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}targets(){return me('svg textpath [href*="'+this.id()+'"]')}}wn.prototype.MorphArray=hn,ot({Container:{path:Nt((function(t){return this.put(new wn).plot(t||new hn)}))}}),At(wn,"Path");var _n=Object.freeze({__proto__:null,array:function(){return this._array||(this._array=new Qe(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new Qe(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){const n=dt(this,t,e);return this.attr("points",this.array().size(n.width,n.height))}});class xn extends Pe{constructor(t){super(Ot("polygon",t),t)}}ot({Container:{polygon:Nt((function(t){return this.put(new xn).plot(t||new Qe)}))}}),Et(xn,Je),Et(xn,_n),At(xn,"Polygon");class bn extends Pe{constructor(t){super(Ot("polyline",t),t)}}ot({Container:{polyline:Nt((function(t){return this.put(new bn).plot(t||new Qe)}))}}),Et(bn,Je),Et(bn,_n),At(bn,"Polyline");class Mn extends Pe{constructor(t){super(Ot("rect",t),t)}}Et(Mn,{rx:Te,ry:Se}),ot({Container:{rect:Nt((function(t,e){return this.put(new Mn).size(t,e)}))}}),At(Mn,"Rect");class On{constructor(){this._first=null,this._last=null}push(t){var e=t.next?t:{value:t,next:null,prev:null};return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._last=e,this._first=e),e}shift(){var t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}remove(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}}const kn={nextDraw:null,frames:new On,timeouts:new On,immediates:new On,timer:()=>vt.window.performance||vt.window.Date,transforms:[],frame(t){var e=kn.frames.push({run:t});return null===kn.nextDraw&&(kn.nextDraw=vt.window.requestAnimationFrame(kn._draw)),e},timeout(t,e){e=e||0;var n=kn.timer().now()+e,r=kn.timeouts.push({run:t,time:n});return null===kn.nextDraw&&(kn.nextDraw=vt.window.requestAnimationFrame(kn._draw)),r},immediate(t){var e=kn.immediates.push(t);return null===kn.nextDraw&&(kn.nextDraw=vt.window.requestAnimationFrame(kn._draw)),e},cancelFrame(t){null!=t&&kn.frames.remove(t)},clearTimeout(t){null!=t&&kn.timeouts.remove(t)},cancelImmediate(t){null!=t&&kn.immediates.remove(t)},_draw(t){for(var e=null,n=kn.timeouts.last();(e=kn.timeouts.shift())&&(t>=e.time?e.run():kn.timeouts.push(e),e!==n););for(var r=null,i=kn.frames.last();r!==i&&(r=kn.frames.shift());)r.run(t);for(var s=null;s=kn.immediates.shift();)s();kn.nextDraw=kn.timeouts.first()||kn.frames.first()?vt.window.requestAnimationFrame(kn._draw):null}};var Cn=function(t){var e=t.start,n=t.runner.duration();return{start:e,duration:n,end:e+n,runner:t.runner}};const An=function(){const t=vt.window;return(t.performance||t.Date).now()};class Tn extends ge{constructor(t=An){super(),this._timeSource=t,this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}schedule(t,e,n){if(null==t)return this._runners.map(Cn);var r=0,i=this.getEndTime();if(e=e||0,null==n||"last"===n||"after"===n)r=i;else if("absolute"===n||"start"===n)r=e,e=0;else if("now"===n)r=this._time;else{if("relative"!==n)throw new Error('Invalid value for the "when" parameter');{const n=this._runners[t.id];n&&(r=n.start+e,e=0)}}t.unschedule(),t.timeline(this);const s=t.persist(),o={persist:null===s?this._persist:s,start:r+e,runner:t};return this._lastRunnerId=t.id,this._runners.push(o),this._runners.sort((t,e)=>t.start-e.start),this._runnerIds=this._runners.map(t=>t.runner.id),this.updateTime()._continue(),this}unschedule(t){var e=this._runnerIds.indexOf(t.id);return e<0||(this._runners.splice(e,1),this._runnerIds.splice(e,1),t.timeline(null)),this}getEndTime(){var t=this._runners[this._runnerIds.indexOf(this._lastRunnerId)],e=t?t.runner.duration():0;return(t?t.start:0)+e}getEndTimeOfTimeline(){let t=0;for(var e=0;e<this._runners.length;e++){const r=this._runners[e];var n=r?r.runner.duration():0;const i=(r?r.start:0)+n;i>t&&(t=i)}return t}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}play(){return this._paused=!1,this.updateTime()._continue()}pause(){return this._paused=!0,this._continue()}stop(){return this.time(0),this.pause()}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}speed(t){return null==t?this._speed:(this._speed=t,this)}reverse(t){var e=this.speed();if(null==t)return this.speed(-e);var n=Math.abs(e);return this.speed(t?n:-n)}seek(t){return this.time(this._time+t)}time(t){return null==t?this._time:(this._time=t,this._continue(!0))}persist(t){return null==t?this._persist:(this._persist=t,this)}source(t){return null==t?this._timeSource:(this._timeSource=t,this)}_stepFn(t=!1){var e=this._timeSource(),n=e-this._lastSourceTime;t&&(n=0);var r=this._speed*n+(this._time-this._lastStepTime);this._lastSourceTime=e,t||(this._time+=r,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(var i=this._runners.length;i--;){const t=this._runners[i],e=t.runner;this._time-t.start<=0&&e.reset()}for(var s=!1,o=0,a=this._runners.length;o<a;o++){const t=this._runners[o],e=t.runner;let n=r;const i=this._time-t.start;if(i<=0)s=!0;else if(i<n&&(n=i),e.active())if(e.step(n).done){if(!0!==t.persist){e.duration()-e.time()+this._time+t.persist<this._time&&(e.unschedule(),--o,--a)}}else s=!0}return s&&!(this._speed<0&&0===this._time)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}_continue(t=!1){return kn.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():(this._paused||(this._nextFrame=kn.frame(this._step)),this)}active(){return!!this._nextFrame}}ot({Element:{timeline:function(t){return null==t?(this._timeline=this._timeline||new Tn,this._timeline):(this._timeline=t,this)}}});class Sn extends ge{constructor(t){super(),this.id=Sn.id++,t="function"==typeof(t=null==t?ve:t)?new on(t):t,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration="number"==typeof t&&t,this._isDeclarative=t instanceof on,this._stepper=this._isDeclarative?t:new sn,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new ae,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}element(t){return null==t?this._element:(this._element=t,t._prepareRunner(),this)}timeline(t){return void 0===t?this._timeline:(this._timeline=t,this)}animate(t,e,n){var r=Sn.sanitise(t,e,n),i=new Sn(r.duration);return this._timeline&&i.timeline(this._timeline),this._element&&i.element(this._element),i.loop(r).schedule(r.delay,r.when)}schedule(t,e,n){if(t instanceof Tn||(n=e,e=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,e,n),this}unschedule(){var t=this.timeline();return t&&t.unschedule(this),this}loop(t,e,n){return"object"==typeof t&&(e=t.swing,n=t.wait,t=t.times),this._times=t||1/0,this._swing=e||!1,this._wait=n||0,!0===this._times&&(this._times=1/0),this}delay(t){return this.animate(0,t)}queue(t,e,n,r){return this._queue.push({initialiser:t||ye,runner:e||ye,retarget:n,isTransform:r,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}during(t){return this.queue(null,t)}after(t){return this.on("finished",t)}time(t){if(null==t)return this._time;const e=t-this._time;return this.step(e),this}duration(){return this._times*(this._wait+this._duration)-this._wait}loops(t){var e=this._duration+this._wait;if(null==t){var n=Math.floor(this._time/e),r=(this._time-n*e)/this._duration;return Math.min(n+r,this._times)}var i=t%1,s=e*Math.floor(t)+this._duration*i;return this.time(s)}persist(t){return null==t?this._persist:(this._persist=t,this)}position(t){var e,n=this._time,r=this._duration,i=this._wait,s=this._times,o=this._swing,a=this._reverse;if(null==t){const t=function(t){var e=o*Math.floor(t%(2*(i+r))/(i+r)),n=e&&!a||!e&&a,s=Math.pow(-1,n)*(t%(i+r))/r+n;return Math.max(Math.min(s,1),0)};var h=s*(i+r)-i;return e=n<=0?Math.round(t(1e-5)):n<h?t(n):Math.round(t(h-1e-5))}var u=Math.floor(this.loops()),l=o&&u%2==0;return e=u+(l&&!a||a&&l?t:1-t),this.loops(e)}progress(t){return null==t?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}step(t){if(!this.enabled)return this;t=null==t?16:t,this._time+=t;var e=this.position(),n=this._lastPosition!==e&&this._time>=0;this._lastPosition=e;var r=this.duration(),i=this._lastTime<=0&&this._time>0,s=this._lastTime<r&&this._time>=r;this._lastTime=this._time,i&&this.fire("start",this);var o=this._isDeclarative;if(this.done=!o&&!s&&this._time>=r,this._reseted=!1,n||o){this._initialise(n),this.transforms=new ae;var a=this._run(o?t:e);this.fire("step",this)}return this.done=this.done||a&&o,s&&this.fire("finished",this),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}finish(){return this.step(1/0)}reverse(t){return this._reverse=null==t?!this._reverse:t,this}ease(t){return this._stepper=new sn(t),this}active(t){return null==t?this.enabled:(this.enabled=t,this)}_rememberMorpher(t,e){if(this._history[t]={morpher:e,caller:this._queue[this._queue.length-1]},this._isDeclarative){var n=this.timeline();n&&n.play()}}_tryRetarget(t,e,n){if(this._history[t]){if(!this._history[t].caller.initialised){const e=this._queue.indexOf(this._history[t].caller);return this._queue.splice(e,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget(e,n):this._history[t].morpher.to(e),this._history[t].caller.finished=!1;var r=this.timeline();return r&&r.play(),!0}return!1}_initialise(t){if(t||this._isDeclarative)for(var e=0,n=this._queue.length;e<n;++e){var r=this._queue[e],i=this._isDeclarative||!r.initialised&&t;t=!r.finished,i&&t&&(r.initialiser.call(this),r.initialised=!0)}}_run(t){for(var e=!0,n=0,r=this._queue.length;n<r;++n){var i=this._queue[n],s=i.runner.call(this,t);i.finished=i.finished||!0===s,e=e&&i.finished}return e}addTransform(t,e){return this.transforms.lmultiplyO(t),this}clearTransform(){return this.transforms=new ae,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter(t=>!t.isTransform))}static sanitise(t,e,n){var r=1,i=!1,s=0;return e=e||_e,n=n||"last","object"!=typeof(t=t||ve)||t instanceof rn||(e=t.delay||e,n=t.when||n,i=t.swing||i,r=t.times||r,s=t.wait||s,t=t.duration||ve),{duration:t,delay:e,swing:i,times:r,wait:s,when:n}}}Sn.id=0;class En{constructor(t=new ae,e=-1,n=!0){this.transforms=t,this.id=e,this.done=n}clearTransformsFromQueue(){}}Et([Sn,En],{mergeWith(t){return new En(t.transforms.lmultiply(this.transforms),t.id)}});const Nn=(t,e)=>t.lmultiplyO(e),jn=t=>t.transforms;function Dn(){const t=this._transformationRunners.runners.map(jn).reduce(Nn,new ae);this.transform(t),this._transformationRunners.merge(),1===this._transformationRunners.length()&&(this._frameId=null)}class Ln{constructor(){this.runners=[],this.ids=[]}add(t){if(this.runners.includes(t))return;const e=t.id+1;return this.runners.push(t),this.ids.push(e),this}getByID(t){return this.runners[this.ids.indexOf(t+1)]}remove(t){const e=this.ids.indexOf(t+1);return this.ids.splice(e,1),this.runners.splice(e,1),this}merge(){let t=null;return this.runners.forEach((e,n)=>{t&&e.done&&t.done&&(!e._timeline||!e._timeline._runnerIds.includes(e.id))&&(!t._timeline||!t._timeline._runnerIds.includes(t.id))&&(this.remove(e.id),this.edit(t.id,e.mergeWith(t))),t=e}),this}edit(t,e){const n=this.ids.indexOf(t+1);return this.ids.splice(n,1,t+1),this.runners.splice(n,1,e),this}length(){return this.ids.length}clearBefore(t){const e=this.ids.indexOf(t+1)||1;return this.ids.splice(0,e,0),this.runners.splice(0,e,new En).forEach(t=>t.clearTransformsFromQueue()),this}}ot({Element:{animate(t,e,n){var r=Sn.sanitise(t,e,n),i=this.timeline();return new Sn(r.duration).loop(r).element(this).timeline(i.play()).schedule(r.delay,r.when)},delay(t,e){return this.animate(0,t,e)},_clearTransformRunnersBefore(t){this._transformationRunners.clearBefore(t.id)},_currentTransform(t){return this._transformationRunners.runners.filter(e=>e.id<=t.id).map(jn).reduce(Nn,new ae)},_addRunner(t){this._transformationRunners.add(t),kn.cancelImmediate(this._frameId),this._frameId=kn.immediate(Dn.bind(this))},_prepareRunner(){null==this._frameId&&(this._transformationRunners=(new Ln).add(new En(new ae(this))))}}}),Et(Sn,{attr(t,e){return this.styleAttr("attr",t,e)},css(t,e){return this.styleAttr("css",t,e)},styleAttr(t,e,n){if("object"==typeof e){for(var r in e)this.styleAttr(t,r,e[r]);return this}var i=new pn(this._stepper).to(n);return this.queue((function(){i=i.from(this.element()[t](e))}),(function(n){return this.element()[t](e,i.at(n)),i.done()})),this},zoom(t,e){if(this._tryRetarget("zoom",Xe,e))return this;var n=new pn(this._stepper).to(new Me(t));return this.queue((function(){n=n.from(this.element().zoom())}),(function(t){return this.element().zoom(n.at(t),e),n.done()}),(function(t,r){e=r,n.to(t)})),this._rememberMorpher("zoom",n),this},transform(t,e,n){if(e=t.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",t))return this;var r=ae.isMatrixLike(t);n=null!=t.affine?t.affine:null!=n?n:!r;const i=new pn(this._stepper).type(n?gn:ae);let s,o,a,h,u;return this.queue((function(){o=o||this.element(),s=s||pt(t,o),u=new ae(e?void 0:o),o._addRunner(this),e||o._clearTransformRunnersBefore(this)}),(function(l){e||this.clearTransform();const{x:c,y:f}=new se(s).transform(o._currentTransform(this));let d=new ae({...t,origin:[c,f]}),p=this._isDeclarative&&a?a:u;if(n){d=d.decompose(c,f),p=p.decompose(c,f);const t=d.rotate,e=p.rotate,n=[t-360,t,t+360],r=n.map(t=>Math.abs(t-e)),i=Math.min(...r),s=r.indexOf(i);d.rotate=n[s]}e&&(r||(d.rotate=t.rotate||0),this._isDeclarative&&h&&(p.rotate=h)),i.from(p),i.to(d);const m=i.at(l);return h=m.rotate,a=new ae(m),this.addTransform(a),o._addRunner(this),i.done()}),(function(e){(e.origin||"center").toString()!==(t.origin||"center").toString()&&(s=pt(t,o)),t={...e,origin:s}}),!0),this._isDeclarative&&this._rememberMorpher("transform",i),this},x(t,e){return this._queueNumber("x",t)},y(t){return this._queueNumber("y",t)},dx(t=0){return this._queueNumberDelta("x",t)},dy(t=0){return this._queueNumberDelta("y",t)},dmove(t,e){return this.dx(t).dy(e)},_queueNumberDelta(t,e){if(e=new Me(e),this._tryRetarget(t,e))return this;var n=new pn(this._stepper).to(e),r=null;return this.queue((function(){r=this.element()[t](),n.from(r),n.to(r+e)}),(function(e){return this.element()[t](n.at(e)),n.done()}),(function(t){n.to(r+new Me(t))})),this._rememberMorpher(t,n),this},_queueObject(t,e){if(this._tryRetarget(t,e))return this;var n=new pn(this._stepper).to(e);return this.queue((function(){n.from(this.element()[t]())}),(function(e){return this.element()[t](n.at(e)),n.done()})),this._rememberMorpher(t,n),this},_queueNumber(t,e){return this._queueObject(t,new Me(e))},cx(t){return this._queueNumber("cx",t)},cy(t){return this._queueNumber("cy",t)},move(t,e){return this.x(t).y(e)},center(t,e){return this.cx(t).cy(e)},size(t,e){var n;return t&&e||(n=this._element.bbox()),t||(t=n.width/n.height*e),e||(e=n.height/n.width*t),this.width(t).height(e)},width(t){return this._queueNumber("width",t)},height(t){return this._queueNumber("height",t)},plot(t,e,n,r){if(4===arguments.length)return this.plot([t,e,n,r]);if(this._tryRetarget("plot",t))return this;var i=new pn(this._stepper).type(this._element.MorphArray).to(t);return this.queue((function(){i.from(this._element.array())}),(function(t){return this._element.plot(i.at(t)),i.done()})),this._rememberMorpher("plot",i),this},leading(t){return this._queueNumber("leading",t)},viewbox(t,e,n,r){return this._queueObject("viewbox",new le(t,e,n,r))},update(t){return"object"!=typeof t?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset),this)}}),Et(Sn,{rx:Te,ry:Se,from:Ye,to:Xe}),At(Sn,"Runner");class Fn extends Re{constructor(t){super(Ot("svg",t),t),this.namespace()}isRoot(){return!(this.node.parentNode&&this.node.parentNode instanceof vt.window.SVGElement&&"#document"!==this.node.parentNode.nodeName)}root(){return this.isRoot()?this:super.root()}namespace(){return this.isRoot()?this.attr({xmlns:mt,version:"1.1"}).attr("xmlns:xlink",yt,gt).attr("xmlns:svgjs","http://svgjs.com/svgjs",gt):this.root().namespace()}defs(){return this.isRoot()?kt(this.node.querySelector("defs"))||this.put(new qe):this.root().defs()}parent(t){return this.isRoot()?"#document"===this.node.parentNode.nodeName?null:kt(this.node.parentNode):super.parent(t)}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this}}ot({Container:{nested:Nt((function(){return this.put(new Fn)}))}}),At(Fn,"Svg",!0);class zn extends Re{constructor(t){super(Ot("symbol",t),t)}}ot({Container:{symbol:Nt((function(){return this.put(new zn)}))}}),At(zn,"Symbol");var Pn=Object.freeze({__proto__:null,plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(vt.document.createTextNode(t)),this},length:function(){return this.node.getComputedTextLength()}});class In extends Pe{constructor(t){super(Ot("text",t),t),this.dom.leading=new Me(1.3),this._rebuild=!0,this._build=!1}x(t,e=this.bbox()){return null==t?e.x:this.attr("x",this.attr("x")+t-e.x)}y(t,e=this.bbox()){return null==t?e.y:this.attr("y",this.attr("y")+t-e.y)}move(t,e,n=this.bbox()){return this.x(t,n).y(e,n)}cx(t,e=this.bbox()){return null==t?e.cx:this.attr("x",this.attr("x")+t-e.cx)}cy(t,e=this.bbox()){return null==t?e.cy:this.attr("y",this.attr("y")+t-e.cy)}center(t,e,n=this.bbox()){return this.cx(t,n).cy(e,n)}text(t){if(void 0===t){var e=this.node.childNodes,n=0;t="";for(var r=0,i=e.length;r<i;++r)"textPath"!==e[r].nodeName?(r!==n&&3!==e[r].nodeType&&!0===kt(e[r]).dom.newLined&&(t+="\n"),t+=e[r].textContent):0===r&&(n=1);return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else for(var s=0,o=(t=t.split("\n")).length;s<o;s++)this.tspan(t[s]).newLine();return this.build(!1).rebuild()}leading(t){return null==t?this.dom.leading:(this.dom.leading=new Me(t),this.rebuild())}rebuild(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,n=0,r=this.dom.leading;this.each((function(){var t=vt.window.getComputedStyle(this.node).getPropertyValue("font-size"),i=r*new Me(t);this.dom.newLined&&(this.attr("x",e.attr("x")),"\n"===this.text()?n+=i:(this.attr("dy",i+n),n=0))})),this.fire("rebuild")}return this}build(t){return this._build=!!t,this}setData(t){return this.dom=t,this.dom.leading=new Me(t.leading||1.3),this}}Et(In,Pn),ot({Container:{text:Nt((function(t){return this.put(new In).text(t)})),plain:Nt((function(t){return this.put(new In).plain(t)}))}}),At(In,"Text");class Rn extends In{constructor(t){super(Ot("tspan",t),t)}text(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)}dx(t){return this.attr("dx",t)}dy(t){return this.attr("dy",t)}x(t){return this.attr("x",t)}y(t){return this.attr("x",t)}move(t,e){return this.x(t).y(e)}newLine(){var t=this.parent(In);this.dom.newLined=!0;var e=vt.window.getComputedStyle(this.node).getPropertyValue("font-size"),n=t.dom.leading*new Me(e);return this.dy(n).attr("x",t.x())}}Et(Rn,Pn),ot({Tspan:{tspan:Nt((function(t){var e=new Rn;return this._build||this.clear(),this.node.appendChild(e.node),e.text(t)}))}}),At(Rn,"Tspan");class qn extends Re{constructor(t){super(Ot("clipPath",t),t)}remove(){return this.targets().forEach((function(t){t.unclip()})),super.remove()}targets(){return me('svg [clip-path*="'+this.id()+'"]')}}ot({Container:{clip:Nt((function(){return this.defs().put(new qn)}))},Element:{clipWith(t){const e=t instanceof qn?t:this.parent().clip().add(t);return this.attr("clip-path",'url("#'+e.id()+'")')},unclip(){return this.attr("clip-path",null)},clipper(){return this.reference("clip-path")}}}),At(qn,"ClipPath");class Bn extends Ce{constructor(t){super(Ot("foreignObject",t),t)}}ot({Container:{foreignObject:Nt((function(t,e){return this.put(new Bn).size(t,e)}))}}),At(Bn,"ForeignObject");class $n extends Re{constructor(t){super(Ot("g",t),t)}x(t,e=this.bbox()){return null==t?e.x:this.move(t,e.y,e)}y(t,e=this.bbox()){return null==t?e.y:this.move(e.x,t,e)}move(t=0,e=0,n=this.bbox()){const r=t-n.x,i=e-n.y;return this.dmove(r,i)}dx(t){return this.dmove(t,0)}dy(t){return this.dmove(0,t)}dmove(t,e){return this.children().forEach((n,r)=>{const i=n.bbox(),s=new ae(n),o=s.translate(t,e).transform(s.inverse()),a=new se(i.x,i.y).transform(o);n.move(a.x,a.y)}),this}width(t,e=this.bbox()){return null==t?e.width:this.size(t,e.height,e)}height(t,e=this.bbox()){return null==t?e.height:this.size(e.width,t,e)}size(t,e,n=this.bbox()){const r=dt(this,t,e,n),i=r.width/n.width,s=r.height/n.height;return this.children().forEach((t,e)=>{const r=new se(n).transform(new ae(t).inverse());t.scale(i,s,r.x,r.y)}),this}}ot({Container:{group:Nt((function(){return this.put(new $n)}))}}),At($n,"G");class Yn extends Re{constructor(t){super(Ot("a",t),t)}to(t){return this.attr("href",t,yt)}target(t){return this.attr("target",t)}}ot({Container:{link:Nt((function(t){return this.put(new Yn).to(t)}))},Element:{linkTo:function(t){var e=new Yn;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}}),At(Yn,"A");class Xn extends Re{constructor(t){super(Ot("mask",t),t)}remove(){return this.targets().forEach((function(t){t.unmask()})),super.remove()}targets(){return me('svg [mask*="'+this.id()+'"]')}}ot({Container:{mask:Nt((function(){return this.defs().put(new Xn)}))},Element:{maskWith(t){var e=t instanceof Xn?t:this.parent().mask().add(t);return this.attr("mask",'url("#'+e.id()+'")')},unmask(){return this.attr("mask",null)},masker(){return this.reference("mask")}}}),At(Xn,"Mask");class Hn extends Ce{constructor(t){super(Ot("style",t),t)}addText(t=""){return this.node.textContent+=t,this}font(t,e,n={}){return this.rule("@font-face",{fontFamily:t,src:e,...n})}rule(t,e){return this.addText(function(t,e){if(!t)return"";if(!e)return t;var n=t+"{";for(var r in e)n+=r.replace(/([A-Z])/g,(function(t,e){return"-"+e.toLowerCase()}))+":"+e[r]+";";return n+="}"}(t,e))}}ot("Dom",{style:Nt((function(t,e){return this.put(new Hn).rule(t,e)})),fontface:Nt((function(t,e,n){return this.put(new Hn).font(t,e,n)}))}),At(Hn,"Style");class Vn extends In{constructor(t){super(Ot("textPath",t),t)}array(){var t=this.track();return t?t.array():null}plot(t){var e=this.track(),n=null;return e&&(n=e.plot(t)),null==t?n:this}track(){return this.reference("href")}}ot({Container:{textPath:Nt((function(t,e){return t instanceof In||(t=this.text(t)),t.path(e)}))},Text:{path:Nt((function(t,e=!0){var n=new Vn;let r;if(t instanceof wn||(t=this.defs().path(t)),n.attr("href","#"+t,yt),e)for(;r=this.node.firstChild;)n.node.appendChild(r);return this.put(n)})),textPath(){return this.findOne("textPath")}},Path:{text:Nt((function(t){return t instanceof In||(t=(new In).addTo(this.parent()).text(t)),t.path(this)})),targets(){return me('svg [href*="'+this.id()+'"]')}}}),Vn.prototype.MorphArray=hn,At(Vn,"TextPath");class Gn extends Pe{constructor(t){super(Ot("use",t),t)}element(t,e){return this.attr("href",(e||"")+"#"+t,yt)}}ot({Container:{use:Nt((function(t,e){return this.put(new Gn).element(t,e)}))}}),At(Gn,"Use");const Wn=Mt;Et([Fn,zn,Ue,We,tn],at("viewbox")),Et([Ke,bn,xn,wn],at("marker")),Et(In,at("Text")),Et(wn,at("Path")),Et(qe,at("Defs")),Et([In,Rn],at("Tspan")),Et([Mn,Be,Ie,Ge],at("radius")),Et(ge,at("EventTarget")),Et(ke,at("Dom")),Et(Ce,at("Element")),Et(Pe,at("Shape")),Et(Re,at("Container")),Et(Sn,at("Runner")),de.extend([...new Set(st)]),function(t=[]){vn.push(...[].concat(t))}([Me,ie,le,ae,be,Qe,hn]),Et(vn,{to(t){return(new pn).type(this.constructor).from(this.valueOf()).to(t)},fromArray(t){return this.init(t),this}});class Un extends Ce{constructor(t){super(Ot("filter",t),t),this.$source="SourceGraphic",this.$sourceAlpha="SourceAlpha",this.$background="BackgroundImage",this.$backgroundAlpha="BackgroundAlpha",this.$fill="FillPaint",this.$stroke="StrokePaint",this.$autoSetIn=!0}put(t,e){return!(t=super.put(t,e)).attr("in")&&this.$autoSetIn&&t.attr("in",this.$source),t.attr("result")||t.attr("result",t.id()),t}remove(){return this.targets().each("unfilter"),super.remove()}targets(){return me('svg [filter*="'+this.id()+'"]')}toString(){return"url(#"+this.id()+")"}}class Qn extends Ce{constructor(t){super(t,t),this.result(this.id())}in(t){if(null==t){const t=this.attr("in");return this.parent()&&this.parent().find(`[result="${t}"]`)[0]||t}return this.attr("in",t)}result(t){return this.attr("result",t)}toString(){return this.result()}}const Zn=t=>function(...e){for(let n=t.length;n--;)null!=e[n]&&this.attr(t[n],e[n])},Jn={blend:Zn(["in","in2","mode"]),colorMatrix:Zn(["type","values"]),composite:Zn(["in","in2","operator"]),convolveMatrix:function(t){t=new be(t).toString(),this.attr({order:Math.sqrt(t.split(" ").length),kernelMatrix:t})},diffuseLighting:Zn(["surfaceScale","lightingColor","diffuseConstant","kernelUnitLength"]),displacementMap:Zn(["in","in2","scale","xChannelSelector","yChannelSelector"]),dropShadow:Zn(["in","dx","dy","stdDeviation"]),flood:Zn(["flood-color","flood-opacity"]),gaussianBlur:function(t=0,e=t){this.attr("stdDeviation",t+" "+e)},image:function(t){this.attr("href",t,yt)},morphology:Zn(["operator","radius"]),offset:Zn(["dx","dy"]),specularLighting:Zn(["surfaceScale","lightingColor","diffuseConstant","specularExponent","kernelUnitLength"]),tile:Zn([]),turbulence:Zn(["baseFrequency","numOctaves","seed","stitchTiles","type"])};["blend","colorMatrix","componentTransfer","composite","convolveMatrix","diffuseLighting","displacementMap","dropShadow","flood","gaussianBlur","image","merge","morphology","offset","specularLighting","tile","turbulence"].forEach(t=>{const e=ft(t),n=Jn[t];Un[e+"Effect"]=class extends Qn{constructor(t){super(Ot("fe"+e,t),t)}update(t){return n.apply(this,t),this}},Un.prototype[t]=Nt((function(t,...n){const r=new Un[e+"Effect"];return null==t?this.put(r):("function"==typeof t?t.call(r,r):n.unshift(t),this.put(r).update(n))}))}),Et(Un,{merge(t){const e=this.put(new Un.MergeEffect);return"function"==typeof t?(t.call(e,e),e):((t instanceof Array?t:[...arguments]).forEach(t=>{t instanceof Un.MergeNode?e.put(t):e.mergeNode(t)}),e)},componentTransfer(t={}){const e=this.put(new Un.ComponentTransferEffect);if("function"==typeof t)return t.call(e,e),e;if(!(t.r||t.g||t.b||t.a)){t={r:t,g:t,b:t,a:t}}for(const n in t)e.add(new(Un["Func"+n.toUpperCase()])(t[n]));return e}});["distantLight","pointLight","spotLight","mergeNode","FuncR","FuncG","FuncB","FuncA"].forEach(t=>{const e=ft(t);Un[e]=class extends Qn{constructor(t){super(Ot("fe"+e,t),t)}}});["funcR","funcG","funcB","funcA"].forEach((function(t){const e=Un[ft(t)],n=Nt((function(){return this.put(new e)}));Un.ComponentTransferEffect.prototype[t]=n}));["distantLight","pointLight","spotLight"].forEach(t=>{const e=Un[ft(t)],n=Nt((function(){return this.put(new e)}));Un.DiffuseLightingEffect.prototype[t]=n,Un.SpecularLightingEffect.prototype[t]=n}),Et(Un.MergeEffect,{mergeNode(t){return this.put(new Un.MergeNode).attr("in",t)}}),Et(qe,{filter:function(t){var e=this.put(new Un);return"function"==typeof t&&t.call(e,e),e}}),Et(Re,{filter:function(t){return this.defs().filter(t)}}),Et(Ce,{filterWith:function(t){const e=t instanceof Un?t:this.defs().filter(t);return this.attr("filter",e)},unfilter:function(t){return this.attr("filter",null)},filterer(){return this.reference("filter")}}),Et(Qn,{blend:function(t,e){return this.parent()&&this.parent().blend(this,t,e)},colorMatrix:function(t,e){return this.parent()&&this.parent().colorMatrix(t,e).in(this)},componentTransfer:function(t){return this.parent()&&this.parent().componentTransfer(t).in(this)},composite:function(t,e){return this.parent()&&this.parent().composite(this,t,e)},convolveMatrix:function(t){return this.parent()&&this.parent().convolveMatrix(t).in(this)},diffuseLighting:function(t,e,n,r){return this.parent()&&this.parent().diffuseLighting(t,n,r).in(this)},displacementMap:function(t,e,n,r){return this.parent()&&this.parent().displacementMap(this,t,e,n,r)},dropShadow:function(t,e,n){return this.parent()&&this.parent().dropShadow(this,t,e,n).in(this)},flood:function(t,e){return this.parent()&&this.parent().flood(t,e)},gaussianBlur:function(t,e){return this.parent()&&this.parent().gaussianBlur(t,e).in(this)},image:function(t){return this.parent()&&this.parent().image(t)},merge:function(t){return t=t instanceof Array?t:[...t],this.parent()&&this.parent().merge(this,...t)},morphology:function(t,e){return this.parent()&&this.parent().morphology(t,e).in(this)},offset:function(t,e){return this.parent()&&this.parent().offset(t,e).in(this)},specularLighting:function(t,e,n,r,i){return this.parent()&&this.parent().specularLighting(t,n,r,i).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(t,e,n,r,i){return this.parent()&&this.parent().turbulence(t,e,n,r,i).in(this)}}),Et(Un.MergeEffect,{in:function(t){return t instanceof Un.MergeNode?this.add(t,0):this.add((new Un.MergeNode).in(t),0),this}}),Et([Un.CompositeEffect,Un.BlendEffect,Un.DisplacementMapEffect],{in2:function(t){if(null==t){const t=this.attr("in2");return this.parent()&&this.parent().find(`[result="${t}"]`)[0]||t}return this.attr("in2",t)}}),Un.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]};const Kn={default:{border:"red",prize:"gold",button:"darkorange",line:"red",prizeFont:"red",buttonFont:"white"},light:{border:"orange",prize:"lightyellow",button:"tomato",line:"orange",prizeFont:"orange",buttonFont:"white"},dark:{border:"silver",prize:"dimgray",button:"darkslategray",line:"silver",prizeFont:"silver",buttonFont:"lightyellow"}};function tr(t){return t*Math.PI/180}function er(t,e,n,r){const i=tr(r-90);return{x:t+n*Math.cos(i),y:e+n*Math.sin(i)}}function nr(t,e,n,r,i){const s=er(t,e,n,i),o=er(t,e,n,r),a=i-r<=180?0:1;return[`M ${s.x} ${s.y} A ${n} ${n} 0 ${a} 0 ${o.x} ${o.y} L ${t} ${e} L ${s.x} ${s.y}`,s.x-o.x,s,o]}return class{constructor(t={}){if(this.option={pos:[0,0],radius:100,buttonWidth:50,buttonDeg:80,buttonText:"Draw",textBottomPercentage:.6,limit:0,duration:5e3,turn:4,clockwise:!0,draw:!0,theme:"default",...t},!this.option.el)throw new Error("el is undefined");if(!this.option.data)throw new Error("data is undefined");const e=this.option.data.length;if(e<3||e>12)throw new Error("data.length must between 3 and 12");this._count=0,this._rotation=0,this._weight=[],this._weightSum=0,this._running=!1,this._checkPrize(),this.option.draw&&this.draw()}_checkPrize(){const t=this.option.data;for(const e in t){const n=t[e];t[e]="string"==typeof n?{text:n,chance:1}:{...t[e],text:n.text||e,chance:n.chance>0?n.chance:1},this._weight.push(Number(t[e].chance)),this._weightSum+=Number(t[e].chance)}}draw(){const t=this.option;this._center=t.pos.map(e=>e+t.radius);const e=Wn(t.el).size(2*t.radius,2*t.radius);this._deg=360/t.data.length,t.image&&this._drawResource(e),this._drawDefault(e),this._animeFunc()}_drawDefault(t){if(this._turntable&&this._button)return;const e=this.option,n=Kn[e.theme]||Kn.default;var r;e.color={...n,...e.color},e.inRadius?e.inRadius>e.radius&&(e.inRadius=e.radius):e.inRadius=(r=e.radius)<50?r:r<100?r-10:9*Math.round(r/10),this._turntable||this._drawTurntable(t),this._button||this._drawButton(t)}_drawResource(t){const e=this.option,n=e.image;if("object"==typeof n&&Object.keys(n).length>0&&(n.turntable&&"string"==typeof n.turntable&&(this._turntable=t.image(n.turntable).move(e.pos[0],e.pos[1]).size(2*e.radius,2*e.radius)),n.button&&"string"==typeof n.button)){n.offset&&"number"==typeof n.offset||(n.offset=0);const r=[50,50],i=r[1]*e.buttonWidth/r[0];this._button=t.image(n.button).move(this._center[0]-e.buttonWidth/2,this._center[1]+n.offset-i/2).size(e.buttonWidth,i)}}_drawTurntable(t){if(this._turntable)return;const e=this.option;t.circle(2*e.radius).center(this._center[0],this._center[1]).fill(e.color.border),t.circle(2*e.inRadius).center(this._center[0],this._center[1]).fill(e.color.prize),this._turntable=t.group();for(const n of e.data){const[r,i]=nr(this._center[0],this._center[1],e.inRadius,-this._deg/2,this._deg/2),s=t.path(r).fill(n.color||e.color.prize).stroke({color:e.color.line,width:2});let o=n.fontSize||e.fontSize;if(!o){let t=0;for(let e=0;e<n.text.length;++e)n.text[e].match(/\w/)?t+=1:t+=2;o=16*t/2>i*e.textBottomPercentage?i*e.textBottomPercentage/t*2:16}const a=t.plain(n.text).font({size:o}).fill(n.fontColor||e.color.prizeFont).move(this._center[0],e.pos[1]+e.radius-e.inRadius*e.textBottomPercentage-o);a.translate(-a.length()/2,2);const h=t.group().rotate(this._deg*e.data.indexOf(n),this._center[0],this._center[1]);h.add(s),h.add(a),this._turntable.add(h)}}_drawButton(t){if(this._button)return;const e=this.option;if(e.button&&"string"==typeof e.button)return;const n=e.buttonWidth/2,r=this._center,i=(180-e.buttonDeg)/2,[s,,,o]=nr(r[0],r[1],n,i-360,360-i),a=[r[0],r[1]-n/Math.cos(tr(i))],h=`${s} L ${a[0]} ${a[1]} L ${o.x} ${o.y} L ${r[0]} ${r[1]}`,u=t.path(h).fill(e.color.button).filterWith((function(t){t.$autoSetIn=!1,t.gaussianBlur(3).in(t.$sourceAlpha),t.offset(0,3),t.componentTransfer((function(t){t.funcA({type:"linear",slope:.5})})),t.merge([null,t.$source]),t.attr("filterUnits","userSpaceOnUse")}));let l=null;if(""!==e.buttonText){const i=2*n*.8;let s=e.buttonFontSize;if(!s){let t=0;for(let n=0;n<e.buttonText.length;++n)e.buttonText[n].match(/\w/)?t+=1:t+=2;s=16*t/2>i?i/t*2:16}l=t.plain(e.buttonText).font({size:s}).fill(e.color.buttonFont).move(r[0],r[1]-s/2),l.translate(-l.length()/2,0)}this._button=t.group(),this._button.add(u),this._button.add(l)}_animeFunc(){const t=this.option;this._turntable.node.style["transform-origin"]="center",this._button.node.style.cursor="pointer",this._button.node.style["transform-origin"]="center",this._button.mouseover(()=>{t.onButtonHover&&"function"==typeof t.onButtonHover?t.onButtonHover(nt,this._button):nt({targets:this._button.node,scale:1.2,duration:500})}),this._button.mouseout(()=>{nt({targets:this._button.node,scale:1,duration:500})}),this._button.click(()=>{this._run()})}_run(){if(this._running)return;const t=this.option;if(t.limit>0&&this._count>=t.limit)return void(t.onFail&&"function"==typeof t.onFail&&t.onFail());const e=e=>{if(this._rotation>0){const t=360-this._rotation%360;this._rotation+=t}this._rotation+=function(t,e,n){return 360*n+t*e}(e,this._deg,t.turn),nt({targets:this._turntable.node,rotate:t.clockwise?this._rotation+"deg":"-"+this._rotation+"deg",duration:t.duration,begin:()=>{this._running=!0},complete:()=>{if(this._running=!1,++this._count,t.onSuccess&&"function"==typeof t.onSuccess){const n=t.clockwise?t.data[(t.data.length-e)%t.data.length]:t.data[e];t.onSuccess(n)}}})},n=Math.random()*this._weightSum;let r=0,i=0;for(const t in this._weight)if(r+=this._weight[t],r>n){i=t,e(i);break}}}}));
